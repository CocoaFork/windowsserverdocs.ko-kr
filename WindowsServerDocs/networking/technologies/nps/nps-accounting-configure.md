---
title: 네트워크 정책 서버 계정 구성
description: 이 항목에서는 텍스트 파일 및 Windows Server 2016에 네트워크 정책 서버에 대해 로깅을 SQL Server에 대 한 정보를 제공 합니다.
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: dfde2e21-f3d5-41e8-8492-cb3f0d028afb
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 69341e30d90ee1be29c40d835a4f71fe433c11dc
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2018
---
# <a name="configure-network-policy-server-accounting"></a>네트워크 정책 서버 계정 구성

세 가지 방법으로 네트워크 정책 서버 \(NPS\)에 대 한 로깅 수 있습니다.

- **이벤트 로깅에서**합니다. 감사 및 문제 해결 시도 연결 주로 사용 합니다. NPS 이벤트 NPS 콘솔에서 NPS 서버 속성 가져와서 로깅 구성할 수 있습니다.

- **로컬 파일 사용자 인증과 계정 요청 로그인**합니다. 연결 분석 및 청구 목적을 위해 주로 사용 합니다. 도 유용 보안 조사 도구로 공격 이후 악의적인 사용자의 활동을 추적 하는 방법을 제공 하기 때문입니다. 로컬 파일 로깅 사용 하 여 계정 구성 마법사 구성할 수 있습니다.

- **Microsoft SQL Server XML 호환 데이터베이스에 사용자 인증과 계정 요청 로깅**합니다. 허용 여러 서버 NPS 하나의 데이터 소스를 실행 하는 데 사용 합니다. 또한 경우도 사용 하는 이점을 제공 합니다. 계정 구성 마법사를 사용 하 여 SQL Server 로깅을 구성할 수 있습니다.

## <a name="use-the-accounting-configuration-wizard"></a>계정 구성 마법사를 사용 하 여

계정을 구성 마법사를 사용 하 여 다음과 같은 네 가지 계정 설정을 구성할 수 있습니다.

- **로그인에 SQL**합니다. 이 설정을 사용 하 여 연결 하 고 SQL server 계정 데이터를 보내도록 NPS 수 있도록 해 주는 SQL Server에 대 한 데이터 링크를 구성할 수 있습니다. 또한 마법사 SQL Server 데이터베이스 NPS SQL server 로깅와 호환 되는지 확인 하는 데이터베이스를 구성할 수 있습니다.
- **로그인에 텍스트**합니다. 이 설정을 사용 하 여 텍스트 파일 계정 데이터 로그인 NPS 구성할 수 있습니다.
- **로그인 병렬**합니다. 이 설정을 사용 하 여 데이터 링크 SQL Server 및 데이터베이스를 구성할 수 있습니다. 텍스트 파일 로깅 NPS 텍스트 파일 및 SQL Server 데이터베이스를 동시에 기록 되도록 구성할 수 있습니다. 
- **백업으로 SQL 로깅**합니다. 이 설정을 사용 하 여 데이터 링크 SQL Server 및 데이터베이스를 구성할 수 있습니다. 또한, NPS SQL Server 로그인에 실패 하는 경우 사용 하는 텍스트 파일 로깅을 구성할 수 있습니다.

이러한 설정을 뿐 아니라 SQL Server 기록 및 텍스트 로깅 NPS 로그온 실패 하는 경우 연결 요청을 처리 하기 위해 계속 여부를 지정할 수 있습니다. 이 지정할 수는 **오류 알림 섹션 로깅** 로컬 파일 로깅 속성 SQL server 로깅 속성와의 계정 구성을 마법사를 실행 하는 동안에 합니다.

### <a name="to-run-the-accounting-configuration-wizard"></a>계정을 구성 마법사를 실행 하려면

계정을 구성 마법사를 실행 하려면 다음 단계를 완료 합니다.

1. NPS 콘솔 또는 NPS Microsoft Management Console (MMC) 스냅인 엽니다.
2. 콘솔 트리에서 클릭 **계정**합니다.
3. 세부 정보 창에서에 **계정**, 클릭 **계정 구성**합니다.

## <a name="configure-nps-log-file-properties"></a>NPS 로그 파일 속성을 구성 합니다.

네트워크 NPS 정책 서버 () 사용자 인증 요청, 메시지 액세스 허용, 메시지 액세스 거부, 계정 요청 하 고 응답 및 정기적으로 진행 상황에 대 한 RADIUS(Remote Authentication Dial-In User Service) (RADIUS) 계정 수행 구성할 수 있습니다. 이 절차는 계정 데이터를 저장 하려는 로그 파일을 구성 하 사용할 수 있습니다.

해석 로그 파일에 대 한 자세한 내용은 참조 [해석 NPS 데이터베이스 포맷 로그 파일](https://technet.microsoft.com/library/cc771748.aspx)합니다.

로그 파일 하드 드라이브에 응 하지 않도록 하려면 된 시스템 파티션 별개인 파티션에 유지 하 것이 좋습니다. 다음은 구성 nps 계정에 대 한 자세한 내용은 다음과 같습니다.

- 다른 프로세스에서 컬렉션에 대 한 로그 파일 데이터를 보내도록 명명된 파이프 쓰려고 NPS 구성할 수 있습니다. 명명된 파이프를 사용 하려면 로그 파일 폴더 \\.\pipe 또는 \\ComputerName\pipe로 설정 합니다. 명명된 파이프 서버 프로그램 라고 하는 데이터를 수락 하도록 \\.\pipe\iaslog.log 명명된 파이프를 만듭니다. 로컬 파일 속성 대화 상자에서 만들기 새 로그 파일을 선택 하지 않습니다 (제한 없음된 파일 크기)에서 파이프 라는 때 사용 하 여 합니다.

- 디렉터리 로그 파일 시스템 환경 변수 캡처하, 시스템 루트 %%windir % 등 (사용자 변수) 대신 사용 하 여 만들 수 있습니다. 예를 들어 환경 변수 %windir% 사용 하 여 경로 하위 폴더 \System32\Logs (즉, %windir%\System32\Logs\)에서 로그 파일을 시스템 디렉터리에를 찾습니다.

- 로그 파일 형식을 전환 새 로그를 만들 수는 발생 하지 않습니다. 변경 당시 활성화 되는 파일을 두 가지 형식의 mixture 포함 됩니다 로그 파일 형식을 변경 하는 경우 (시작 로그에 기록 이전 형식은 및 끝 로그에 기록은 새로운 format).

- 전체 하드 디스크 드라이브 또는 다른 원인 인해 RADIUS 계정을 실패 NPS 중지 연결 요청을 처리 사용자가 네트워크 리소스에 액세스 하지 못하도록 합니다.

- NPS Microsoft® SQL Server 로그인 할 수 있게™ 데이터베이스의 대신 또는 외에, 파일을 로컬에 로그인 합니다.

구성원에는 **도메인 관리자** 그룹은이 절차를 수행 하는 데 필요한 최소 합니다.


### <a name="to-configure-nps-log-file-properties"></a>NPS 로그 파일 속성 구성 하려면

1. NPS 콘솔 또는 NPS Microsoft Management Console (MMC) 스냅인 엽니다.
2. 콘솔 트리에서 클릭 **계정**합니다.
3. 세부 정보 창에서에서 **로그 파일 속성**, 클릭 **변경 로그 파일 속성**합니다. **로그 파일 속성** 대화 상자를 엽니다.
4. **로그 파일 속성**에 **설정** 탭에 **다음 정보 기록**, 로그 계정 목표를 달성 하도록 충분 한 정보를 선택 했는지 확인 합니다. 예를 들어 로그를 상관 세션을 수행 해야 하는 경우 모든 확인란을 선택 합니다.
5. **로그온 실패 작업**, **실패를 기록 하는 경우 연결 요청 무시** NPS 로그 파일에는 몇 가지 이유로 사용할 수 없음 또는 전체 메시지 액세스 요청을 처리를 중지 하려는 경우입니다. 계속 로그온 실패 하는 경우 연결 요청을 처리 하는 NPS 하려는 경우이 확인란을 선택 하지 마십시오.
6. 에 **로그 파일 속성** 대화 상자를 클릭 하는 **로그 파일** 탭 합니다.
7. 에 **로그 파일** 탭에 **디렉터리**, NPS 로그 파일을 저장 하려는 위치를 입력 합니다. 기본 위치는 systemroot\System32\LogFiles 폴더 합니다.
    >[!NOTE]
    >전체 경로 문을에 제공 하지 않을 경우 **로그 파일 디렉터리**, 기본 경로 사용 합니다. 예를 들어, 사용자가 입력 **NPSLogFile** 에 **로그 파일 디렉터리**, 파일은 %systemroot%\System32\NPSLogFile 아래에 있습니다.
8. **형식**, 클릭 **DTS 호환**합니다. 원하는 경우와 같은 레거시 파일 형식을 대신 선택할 수도 있습니다 **ODBC \(Legacy\)** 또는 **IAS \(Legacy\)**합니다.
    >[!NOTE]
    >**ODBC** 및 **IAS** 레거시 파일 형식을 일부 NPS SQL Server 데이터베이스에 전송 하는 정보를 포함 합니다. **DTS 호환** XML 형식 NPS SQL Server 데이터베이스에 데이터를 가져올 때 사용 하는 파일 형식 XML 형식 같습니다. 따라서는 **DTS 호환** nps 표준 SQL Server 데이터베이스에 데이터를 더 효율적이 고 완료 전송을 제공 하는 파일 형식 있습니다.
9. **새 로그 파일을 만들**, NPS 지정 된 간격 로그 파일을 새 시작를 사용 하려는 간격 구성 하려면:
    - 짙은 거래 볼륨 및 로그인 활동을 클릭 하 여 **매일**합니다.
    - 덜 거래 볼륨 및 로그인 활동을 클릭 하 여 **매주** 또는 **월별**합니다.
    - 한 로그 파일에 모두 거래를 저장 하기 위해 클릭 **사용 안 함 \(unlimited file size\)**합니다.
    - 로그 각 파일의 크기를 제한 하려면 클릭 **로그 파일이 크기가 때**를 선택한 다음 새 로그를 만들 파일 크기를 입력 합니다. 기본 크기가 10 크기 (MB)입니다.
10. NPS 디스크 공간을 위한 새로운 로그 파일 하드 디스크가 거의 용량 때 이전 로그 파일을 삭제 하려면 되도록 **디스크가 전체 삭제 오래 된 로그 파일 때** 을 선택 합니다. 그러나이 옵션은 하지를 사용할 수 경우 값 **새 로그 파일을 만들** 는 **사용 안 함 \(unlimited file size\)**합니다. 또한 오래 된 파일이 이면 현재 로그 파일 삭제 되지 않습니다.

## <a name="configure-nps-sql-server-logging"></a>NPS SQL Server 로깅 구성

이 절차를 실행 하는 Microsoft SQL Server 로컬 또는 원격 데이터베이스 로그 RADIUS 계정 데이터를 사용할 수 있습니다.

>[!NOTE]
>NPS 계정 데이터를 보내는 XML 문서로 형식을 여 **report_event** 프로시저 NPS에 지정 된 SQL Server 데이터베이스에 저장 합니다. 라는 저장된 프로시저 SQL Server 제대로 작동 하려면 기록에 대 한 있어야 **report_event** 수신 하 고 NPS의 XML 문서 분석할 수 있는 SQL Server 데이터베이스에 있습니다.

오른쪽 단추를 클릭 하거나 도메인 관리자의 회원이이 절차를 수행 하는 데 필요한 최소입니다.

### <a name="to-configure-sql-server-logging-in-nps"></a>SQL Server NPS 로그인 구성 하려면

1. NPS 콘솔 또는 NPS Microsoft Management Console (MMC) 스냅인 엽니다.
2. 콘솔 트리에서 클릭 **계정**합니다.
3. 세부 정보 창에서에 **SQL Server 로깅 속성**, 클릭 **변경 SQL Server 로깅 속성**합니다. **SQL Server 로깅 속성** 대화 상자를 엽니다.
4. **다음 정보 기록**, 로그인 하려면 정보를 선택 합니다. 
    - 모든 계정 요청을 클릭 **계정 요청**합니다.
    - 기록 인증 요청을 클릭 하려면 **인증 요청**합니다.
    - 주기적 계정 상태를 클릭 **주기적 계정 상태**합니다.
    - 중간 계정 요청 등 정기 상태를 기록 클릭 **정기 상태**합니다.
5. 간에 NPS 고 SQL Server 실행 하는 서버 허용 동시 세션 수가 구성에 숫자를 입력 **동시 세션 최대**합니다.
6. SQL Server 데이터 소스에서 구성 하려면 **SQL Server 로깅**, 클릭 **구성**합니다. **데이터 연결 속성** 대화 상자를 엽니다. 에 **연결** 탭에서 다음을 지정 합니다. 
    - 데이터베이스 저장 되는 서버에 이름을 지정 하려면 입력 하거나에 이름을 **선택 서버 이름을 입력 하거나**합니다.
    - 클릭 하 고 서버에 로그온 할 때 인증 방법을 지정 하려면 **통합 보안을 사용 하 여 Windows NT**합니다. 클릭 하거나 **특정 사용자 이름 및 암호를 사용 하 여**, 자격 증명을 입력 하 고 **사용자 이름** 및 **암호**합니다.
    - 새 암호를 허용 하려면 클릭 **암호가**합니다.
    - 암호를 저장 하기 위해 클릭 **암호 저장 허용**합니다.
    - 클릭 SQL Server 실행 하는 컴퓨터에 연결 하는 데이터베이스를 지정 하려면 **서버에 대 한 데이터베이스를 선택**, 데이터베이스 이름이 목록에서 선택 합니다.
7. NPS SQL Server와 연결 테스트를 하려면 클릭 **연결 테스트**합니다. 클릭 **확인** 닫으려면 **데이터 연결 속성**합니다.
8. **로그온 실패 작업**선택 **장애 조치 텍스트 파일 로깅 사용** NPS 텍스트 파일 로깅 SQL Server 로그인에 실패 하는 경우 계속 하려면 원하는 합니다. 
9. **로그온 실패 작업**, **실패를 기록 하는 경우 연결 요청 무시** NPS 로그 파일에는 몇 가지 이유로 사용할 수 없음 또는 전체 메시지 액세스 요청을 처리를 중지 하려는 경우입니다. 계속 로그온 실패 하는 경우 연결 요청을 처리 하는 NPS 하려는 경우이 확인란을 선택 하지 마십시오.

## <a name="ping-user-name"></a>Ping 사용자 이름

일부 RADIUS 프록시 서버 및 네트워크 액세스 서버 주기적으로 요청 보내기를 찾아 인증과 계정 (ping 요청 라고도 함) NPS 서버 네트워크에 있는지 확인 합니다. 이러한 ping 요청 가상 사용자 이름을 포함 됩니다. NPS 이러한 요청을 처리할 때 액세스 거부 레코드, 유효한 레코드를 추적 하기 어렵게 만드는 이벤트 및 계정 로그도 합니다.

레지스트리 항목이 대 한 구성 하는 경우 **사용자 이름 ping**, NPS 다른 서버에서 사용자 이름 값 ping 요청에 대해 레지스트리 항목이 값을 찾습니다. A **사용자 이름 ping** RADIUS 프록시 서버 및 네트워크 액세스 서버에서 보낸 가상의 사용자 이름 (또는 사용자 이름, 변수 및 일치 하는 패턴 가상의 사용자 이름) 레지스트리 항목이 지정 합니다. 하면 NPS와 일치 하는 ping 요청을 받습니다는 **사용자 이름 ping** 레지스트리 항목이 값을 NPS는 요청을 처리 하지 않고 인증 요청을 거부 합니다. NPS 거래 이벤트 로그를 보다 쉽게 해석 하는 모든 로그 파일에서 가상 사용자 이름을 포함 된 기록 하지 않습니다.

**사용자 이름 ping** 기본적으로 설치 되지 않습니다. 추가 해야 **사용자 이름 ping** 레지스트리에 합니다. 레지스트리 편집기를 사용 하 여 레지스트리 항목이 추가할 수 있습니다.

>[!CAUTION]
>레지스트리 편집기를 잘못 시스템 심각한 손상을 줄 수 있습니다. 레지스트리를 변경 하기 전에 컴퓨터에 중요 한 데이터를 백업 해야 합니다.

### <a name="to-add-ping-user-name-to-the-registry"></a>Ping 사용자 이름 레지스트리를 추가 하려면

Ping 사용자 이름 추가할 수 다음 레지스트리 키 문자열 값으로 로컬 관리자가 그룹의 회원 하 여 다음과 같습니다.

`HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\IAS\Parameters`

- **이름**: `ping user-name`
- **입력**: `REG_SZ`
- **데이터**: *사용자 이름*

>[!TIP]
>개 이상의 사용자 이름에 대 한 나타내기 위해는 **사용자 이름 ping** 이름 패턴을에서 와일드 카드 문자를 포함 하 여 DNS 이름, 입력, 값 **데이터**합니다.
