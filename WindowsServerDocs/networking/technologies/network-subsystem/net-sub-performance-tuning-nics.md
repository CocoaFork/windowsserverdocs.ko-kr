---
title: 네트워크 어댑터 성능 조정
description: 이 항목은 Windows Server 2016에 대 한 네트워크 하위 시스템 성능 조정 가이드의 일부입니다.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 0b9b0f80-415c-4f5e-8377-c09b51d9c5dd
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: a0d87f2e8c9b3ca7581d20009cd9c0e030241270
ms.sourcegitcommit: f6490192d686f0a1e0c2ebe471f98e30105c0844
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/10/2019
ms.locfileid: "70871887"
---
# <a name="performance-tuning-network-adapters"></a>네트워크 어댑터 성능 조정

>적용 대상: Windows Server(반기 채널), Windows Server 2016

이 항목을 사용 하 여 Windows Server 2016를 실행 하는 컴퓨터에 설치 된 네트워크 어댑터를 성능 튜닝할 수 있습니다.

네트워크 어댑터에 대한 올바른 조정 설정은 다음 변수에 따라 결정됩니다.

- 네트워크 어댑터와 해당 기능 집합  

- 서버에서 수행하는 작업의 유형  

- 서버 하드웨어 및 소프트웨어 리소스  

- 서버에 대한 성능 목표  

네트워크 어댑터에서 조정 옵션을 제공하는 경우 위에 설명된 매개 변수를 기반으로 최적의 처리량을 달성하기 위해 네트워크 처리량 및 리소스 사용을 최적화할 수 있습니다.  

다음 섹션에서는 성능 조정 옵션 중 일부에 대해 설명합니다.  

##  <a name="bkmk_offload"></a>오프 로드 기능 사용

일반적으로 네트워크 어댑터 오프로드 기능을 설정하는 것이 좋습니다. 하지만 네트워크 어댑터가 높은 처리량을 가진 오프로드 기능을 처리할 수 있을 만큼 강력하지 않은 경우가 있습니다.

>[!IMPORTANT]
>오프 로드 기능 **IPsec 작업 오프 로드** 또는 **TCP Chimney 오프 로드**를 사용 하지 마세요. 이러한 기술은 Windows Server 2016에서 더 이상 사용 되지 않으며 서버 및 네트워킹 성능에 부정적인 영향을 줄 수 있습니다. 또한 이러한 기술은 향후 Microsoft에서 지원 되지 않을 수 있습니다.

예를 들어 분할 오프로드를 사용하면 하드웨어 리소스가 제한되기 때문에 일부 네트워크 어댑터에서 최대 지속 가능 처리량이 줄어들 수 있습니다. 그러나 감소된 처리량이 제약으로 여겨지지 않는 경우 이 유형의 네트워크 어댑터에도 오프로드 기능을 사용해야 합니다.

>[!NOTE]
> 일부 네트워크 어댑터에서는 전송 경로와 수신 경로에 독립적으로 오프로드 기능을 사용해야 합니다.

##  <a name="bkmk_rss_web"></a>웹 서버에 대 한 RSS (수신측 배율) 사용

네트워크 어댑터 수가 서버의 논리 프로세서보다 적은 경우 RSS를 통해 웹 확장성과 성능을 개선할 수 있습니다. 모든 웹 트래픽이 RSS 지원 네트워크 어댑터를 통과하는 경우 다양한 연결에서 들어오는 웹 요청을 여러 CPU에서 동시에 처리할 수 있습니다.

부하 배포를 \(\) 위한 rss 및 하이퍼텍스트 전송 프로토콜의 논리 때문에, rss를 사용할 수 없는 네트워크 어댑터가 또는 서버에서 웹 트래픽을 허용 하는 경우 성능이 심각 하 게 저하 될 수 있습니다. RSS 지원 네트워크 어댑터가 더 많이 있습니다. 이 경우 RSS 지원 네트워크 어댑터를 사용하거나 네트워크 어댑터 속성의 **고급 속성** 탭에서 RSS를 사용하지 않도록 설정해야 합니다. 네트워크 어댑터가 RSS를 지원하는지 여부를 확인하려면 네트워크 어댑터 속성의 **고급 속성** 탭에서 RSS 정보를 확인하면 됩니다.

### <a name="rss-profiles-and-rss-queues"></a>RSS 프로필 및 RSS 큐

미리 정의 된 기본 RSS 프로필은 이전 버전의 운영 체제에서 기본 동작을 변경 하는 NUMA 정적입니다. RSS 프로필을 시작하려면 사용 가능한 프로필을 검토하여 RSS 프로필이 유용한 경우 및 네트워크 환경과 하드웨어에 RSS 프로필을 적용하는 방법을 이해해야 합니다.

예를 들어 작업 관리자를 열고 서버에서 논리 프로세서를 검토한 결과, 수신 트래픽에 미달 사용되는 것처럼 보이는 경우 RSS 큐 수를 기본값 2개에서 해당 네트워크 어댑터가 지원하는 최대값으로 늘릴 수 있습니다. 네트워크 어댑터에서 드라이버의 일부로 RSS 큐 수를 변경하는 옵션을 제공할 수 있습니다.

##  <a name="bkmk_resources"></a>네트워크 어댑터 리소스를 늘립니다.

수신 및 전송 버퍼와 같은 리소스의 수동 구성을 허용하는 네트워크 어댑터의 경우 할당된 리소스를 늘려야 합니다. 

일부 네트워크 어댑터는 호스트에서 할당되는 메모리를 절약하기 위해 수신 버퍼를 낮게 설정합니다. 이러한 값이 낮으면 패킷이 손실되고 성능이 저하될 수 있습니다. 따라서 수신 작업이 많은 시나리오에서는 수신 버퍼 값을 최대값으로 늘리는 것이 좋습니다.

>[!NOTE]
>네트워크 어댑터에 수동 리소스 구성이 표시되지 않으면 네트워크 어댑터가 동적으로 리소스를 구성하거나 리소스가 변경할 수 없는 고정 값으로 설정된 것입니다.

### <a name="enabling-interrupt-moderation"></a>인터럽트 조절 사용

일부 네트워크 어댑터는 인터럽트 조절을 제어할 수 있도록 여러 가지 인터럽트 조절 수준, 버퍼 통합 매개 변수(전송 버퍼와 수신 버퍼에 별도로 제공될 수도 있음) 또는 둘 다를 제공합니다.

CPU 바인딩된 작업에는 인터럽트 조절을 고려해야 합니다. 즉, 호스트 CPU 절감 효과 간의 절충을 고려하고, 인터럽트가 많을수록 대기 시간이 짧아지므로 대기 시간과 증가된 호스트 CPU 절감 효과 간의 상관 관계를 고려해야 합니다. 네트워크 어댑터가 인터럽트 조절을 수행하지 않지만 버퍼 통합을 제공하는 경우 통합된 버퍼 수를 늘리면 전송 또는 수신당 버퍼 수가 증가하므로 성능이 향상됩니다.

##  <a name="bkmk_low"></a>낮은 대기 시간 패킷 처리 성능 조정

대부분의 네트워크 어댑터는 운영 체제에서 발생하는 대기 시간을 최적화할 수 있는 옵션을 제공합니다. 대기 시간은 네트워크 드라이버에서 들어오는 패킷을 처리하여 다시 보낼 때까지 소요되는 시간입니다. 이 시간은 일반적으로 마이크로초 단위로 측정됩니다. 비교를 위해 긴 거리를 통한 패킷 전송 전송 시간은 일반적으로 크기가 더 큰 \(\)시간 (밀리초)으로 측정 됩니다. 이러한 조정은 전송 중에 패킷에서 소요되는 시간을 단축하지 않습니다.

다음은 마이크로초가 중요한 네트워크에 대한 몇 가지 성능 조정 제안 사항입니다.

- 컴퓨터 BIOS를 **고성능**으로 설정하고, C-state는 사용하지 않도록 설정합니다. 그러나 이는 시스템 및 BIOS에 종속되므로 일부 시스템은 운영 체제에서 전원 관리를 제어하는 경우 더 높은 성능을 제공합니다. **설정** 에서 또는 **powercfg** 명령을 사용 하 여 전원 관리 설정을 확인 하 고 조정할 수 있습니다. 자세한 내용은 [Powercfg 명령줄 옵션](https://technet.microsoft.com/library/cc748940.aspx) 을 참조 하세요.

- 운영 체제 전원 관리 프로필 설정을 **고성능 시스템**으로 설정합니다. 이 설정은 시스템 BIOS가 운영 체제에서 전원 관리를 제어하지 못하도록 설정된 경우에는 제대로 작동하지 않습니다.

- 정적 오프로드(예: UDP 체크섬, TCP 체크섬 및 LSO(Send Large Offload))를 사용합니다.

- 트래픽이 대용량 멀티캐스트 수신과 같이 다중 스트리밍되는 경우 RSS를 사용합니다.

-   가능한 가장 짧은 대기 시간이 필요한 네트워크 카드 드라이버에는 **인터럽트 조절** 설정을 사용하지 않습니다. 이 드라이버는 더 많은 CPU 시간을 사용할 수 있으므로 이는 절충 효과를 나타냅니다.

- 패킷을 처리하는 프로그램(사용자 스레드)에서 사용 중인 코어와 CPU 캐시를 공유하는 코어 프로세서에서 네트워크 어댑터 인터럽트 및 DPC를 처리합니다. CPU 선호도 조정을 사용하여 RSS 구성과 함께 프로세스를 특정 논리 프로세서로 전달하여 이를 실현할 수 있습니다. 인터럽트, DPC 및 사용자 모드 스레드에 동일한 코어를 사용하면 ISR, DPC 및 스레드가 코어 사용을 경합하기 때문에 로드가 증가하여 성능이 저하됩니다.

##  <a name="bkmk_smi"></a>시스템 관리 인터럽트

많은 하드웨어 \(시스템에서 시스템 관리\) 를 사용 하 여 다양 한 유지 관리 기능을 사용 합니다. 여기에는\) 오류 수정 코드 \(에 대 한 보고, ECC 메모리 오류, 레거시 USB 호환성, 팬 제어 및 BIOS 제어 전원 관리. 

SMI는 시스템에서 우선 순위가 가장 높으며, CPU를 유지 관리 모드로 전환합니다. 이 모드에서는 일반적으로 BIOS에 포함된 인터럽트 서비스 루틴을 실행하는 동안 다른 모든 작업을 선취합니다.

하지만 이 경우 최대 대기 시간이 100마이크로초 이상이 될 수 있습니다. 

가장 짧은 대기 시간이 필요한 경우 하드웨어 공급자에게 SMI를 가능한 한 최저 수준으로 낮추는 BIOS 버전을 요청해야 합니다. 이를 "짧은 대기 시간 BIOS" 또는 "SMI 없는 BIOS"라고 합니다. SMI 작업이 필수 기능(예: 냉각 팬)을 제어하는 데 사용되어 하드웨어 플랫폼에서 SMI 작업을 완전히 제거하는 것이 불가능한 경우도 있습니다.

>[!NOTE]
>논리 프로세서가 특수한 유지 관리 모드로 실행되어 운영 체제가 개입할 수 없으므로 운영 체제는 SMI를 제어할 수 없습니다.

##  <a name="bkmk_tcp"></a>성능 조정 TCP

 다음 항목을 사용하여 TCP 성능을 조정할 수 있습니다.

###  <a name="bkmk_tcp_params"></a>TCP 수신 창 자동 조정

Windows Server 2008 이전에는 네트워크 스택에서 연결에 대 한 전체 잠재적 처리량을 제한 하는 고정 크기 수신측 창 (65535 바이트)을 사용 했습니다. TCP 스택의 가장 중요한 변경 사항 중 하나는 TCP 수신 창 자동 조정입니다. 

다음과 같이 고정 크기의 TCP 수신 기간을 사용 하는 경우 단일 연결의 총 처리량을 계산할 수 있습니다.

**달성 가능한 총 처리량 (바이트) = TCP 수신 창 크기 \* (바이트) (1/연결 대기 시간 (초))**

예를 들어 총 달성 가능한 처리량은 10 밀리초 대기 시간 \(으로 연결 하는 경우에는 대기업 네트워크 인프라\)에 적합 한 값 51입니다. 

그러나 자동 조정을 사용하면 수신측 창을 조정할 수 있으므로 보낸 사람의 요구에 맞게 확장할 수 있습니다. 연결이 1Gbps 연결의 전체 회선 요금을 달성할 수 있습니다. 이전에 TCP 연결의 달성 가능한 총 처리량으로 인해 제한되었을 수 있는 네트워크 사용 시나리오에서 이제 네트워크를 완전히 사용할 수 있습니다.

#### <a name="deprecated-tcp-parameters"></a>사용 되지 않는 TCP 매개 변수

Windows Server 2003의 다음 레지스트리 설정은 더 이상 지원 되지 않으며 이후 버전에서 무시 됩니다.

이러한 모든 설정에는 다음 레지스트리 위치가 있습니다.

    ```  
    HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Tcpip\Parameters  
    ```  

- TcpWindowSize

- NumTcbTablePartitions  

- MaxHashTableSize  



###  <a name="bkmk_wfp"></a>Windows 필터링 플랫폼

Windows Vista 및 Windows Server 2008에 도입 된 WFP (Windows 필터링 플랫폼)는 타사 Isv (독립 소프트웨어 공급 업체)에 게 패킷 처리 필터를 만들 수 있는 Api를 제공 합니다. 예를 들어 방화벽 및 바이러스 백신 소프트웨어가 여기에 해당합니다.

>[!NOTE]
>WFP 필터가 잘못 작성 되 면 서버의 네트워킹 성능이 크게 저하 될 수 있습니다. 자세한 내용은 Windows 개발자 센터에서 [패킷 처리 드라이버 및 응용 프로그램을 WFP로 포팅](https://msdn.microsoft.com/windows/hardware/gg463267.aspx) 을 참조 하세요.


이 가이드의 모든 항목에 대 한 링크는 [네트워크 하위 시스템 성능 튜닝](net-sub-performance-top.md)을 참조 하세요.
