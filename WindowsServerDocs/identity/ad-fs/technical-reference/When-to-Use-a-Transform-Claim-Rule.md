---
ms.assetid: 77aa61bf-9c04-4889-a5d2-6f45bc1b8bd2
title: "변환 클레임 규칙을 사용 하는 경우"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: c7b7ea2c8d9a08a4cbf6c89c2de2482043efe25b
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/12/2017
---
>적용 대상: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

# <a name="when-to-use-a-transform-claim-rule"></a>변환 클레임 규칙을 사용 하는 경우
이 규칙 수신 클레임 유형 보내는 클레임 입력 하 고 다음 어떤 출력 발생 들어오는 클레임에서 시작 된 값에 따라 결정 하는 작업을 적용 해야 할 때 Active Directory Federation Services \(AD FS\)에서 사용할 수 있습니다. 이 규칙을 사용 하면 통과 또는 클레임은 아래에 설명 된 대로 규칙을에서 구성 된 옵션 중 하나에 따라 다음 규칙 논리 일치 하는 변환 합니다.  
  
|규칙 옵션|규칙 논리|  
|---------------|--------------|  
|모든 들어오는 클레임 통과합니다|수신 클레임 유형 같으면 *클레임 유형 지정 된* 및 같음 값을 *값*, 그런 다음 보내는 클레임 유형 같음을 통해 클레임 *클레임 유형 지정*|  
|들어오는 클레임 값을 바꿉니다 다른 보내는 클레임|수신 클레임 유형 같으면 *클레임 유형 지정 된* 및 같음 값을 *클레임 값 지정 된*, 다음 클레임에 보내는 새 클레임 값으로 변환 *클레임 값 지정 된* 보내는와 클레임 유형 및 *지정 클레임 유형*|  
|새 메일 e\ 접미사 들어오는 e\ 메일 접미사 클레임 교체해|수신 클레임 유형 같으면 *클레임 유형 지정 된* 같음 값 및 *값 접미사 모든*, 다음 새 보내는 클레임 값으로 클레임 변환 *접미사 값 지정 된* 보내는와 클레임 유형 및 *클레임 유형 지정*|  
  
다음 섹션에서는 소개 규칙와이 규칙을 사용 하는 경우에 대 한 추가 세부 정보를 제공 합니다.  
  
## <a name="about-claim-rules"></a>클레임은 규칙에 대 한  
클레임은 규칙 비즈니스 논리를 수신 클레임, 조건이 적용 됩니다 인스턴스를 나타냅니다 \ (경우 다음 y\ x) 조건에 따라 보내는 클레임은 생성 하 고 있습니다. 다음 목록에 대해 알아야 하는 팁 더 읽기 전에 규칙 주장 중요 한 개요가이 항목에서:  
  
-   Snap\에서 광고 FS 관리에 클레임 규칙 만들 수만 클레임 규칙 템플릿을 사용 하 여  
  
-   클레임 규칙 프로세스 들어오는 주장 클레임 공급자에서 직접 \ (Active Directory Federation Service\ 다른 등) 또는 수용 출력에서 변형 클레임 공급자 보안에 대 한 규칙 합니다.  
  
-   클레임은 규칙 해당된 규칙 설정 내에서 시간 순서로 클레임 발급 엔진에서 처리 됩니다. 규칙의 우선 순위를 설정 하 여 조정 해가면서 하거나 이전 규칙 해당된 규칙 설정 내에서 생성 되는 클레임 필터링 더 있습니다.  
  
-   청구 규칙 템플릿 항상 해야 하는 수신 클레임 종류를 지정할 수 있습니다. 그러나 규칙 하나를 사용 하 여 동일한 클레임 종류 여러 클레임 값을 처리할 수 있습니다.  
  
자세한 청구 규칙 및 청구 규칙 집합에 대 한 정보를 참조 [주장 규칙의 역할은](The-Role-of-Claim-Rules.md)합니다. 규칙은 처리 하는 방법에 대 한 자세한 내용은 참조 [클레임 엔진 The 역할](The-Role-of-the-Claims-Engine.md)합니다. 자세한 내용은 클레임 규칙 집합 처리 하는 방법을 참조 하세요. [클레임 파이프라인 The 역할](The-Role-of-the-Claims-Pipeline.md)합니다.  
  
## <a name="pass-through-all-claim-values"></a>모든 통과 값 주장  
이 작업을 사용 하는 경우에 토큰 연합 서비스에 의해 서명 되었는지을 보내는 클레임으로 보내기 전에 지정된 수신 클레임 형식에는 키 사용 하 여 모든 들어오는 클레임 값 지정된 보내는 클레임 유형에 매핑됩니다.  
  
규칙으로 설정 된 경우에 예를 들어 있는 **모든 통과 클레임 값** 옵션 논리 및 들어오는 주장 유형의 그룹을 보내는 클레임 유형의 역할 지정 하 고 발행인이에서 배치 하는 모든 들어오는 클레임 값 클레임 역할 유형의 새로운 보내는 클레임 개별적으로에 복사 됩니다.  
  
## <a name="transforming-a-claim"></a>클레임은 변형  
ADFS, 기간에에서 *변환 주장* 주장 다른 보내는 클레임 값 된 한 수신 바꿀 수 있습니다. 이 기능을 가능 하 게 하는 들어오는 클레임 규칙 변환입니다. 이 규칙은 내 지정된 수신 클레임 종류에 따라 다른 보내는 클레임 값으로 수신 값을 변환 하는 조건 설정할 수 있습니다.  
  
예를 들어, 규칙 들어오는 값 다른 보내는 클레임 값으로 대체 하려면 조건으로 설정 된 경우 다음 그림에서는 같이 그룹의 모든 들어오는 클레임 유형에 역할 새로운 보내는 클레임 유형에 매핑됩니다. 이 경우 구매자 수신 클레임 값이 바뀝니다 관리자의 새 보내는 클레임 값  
  
![변환을 사용 하는 경우](media/adfs2_transform.gif)  
  
또한이 규칙을 사용 하 여 모든 들어오는 클레임 새 값으로 지정된 e\ 메일 접미사 값으로 대체 하는 조건이 적용 합니다. 예를 들어, 조건을 sales.corp.fabrikam.com 접미사 모든 클레임 값 fabrikam.com에 변경 하려면이 규칙에 설정할 수 있습니다.  
  
## <a name="configuring-this-rule-on-a-claims-provider-trust"></a>이 규칙 클레임 공급자 신뢰에서 구성  
청구 공급자 신뢰를 사용 하면이 규칙 들어오는 클레임 클레임 공급자 로부터 해당 하는 신뢰할 수 있는 변환를 구성할 수 있습니다. 클레임 유형 또는 주장 값 클레임 공급자 조직에서 보다 조직에서 다른 의미 가질 수 있습니다. 이 규칙 표준화 클레임 유형 및 당사자에서 보내는 클레임 상응 인식할 수 있도록 클레임 공급자에서 제공 하는 값을 사용할 수 있습니다.  
  
## <a name="configuring-this-rule-on-a-relying-party-trust"></a>이 규칙 신뢰 파티 신뢰에서 구성  
신뢰 파티 신뢰를 사용 하면 특정 당사자에 대 한 주장 변환할이 규칙 구성할 수 있습니다. 클레임 유형 또는 주장 값 수 의미가 특정 당사자에 대 한 및이 규칙은 단일 당사자에 대 한 보내는 클레임 유형 및 값 변경할 수 있습니다.  
  
## <a name="how-to-create-this-rule"></a>이 규칙 만드는 방법  
이 규칙 또는 클레임 규칙 언어를 사용 하 여 만들는 **들어오는 주장 변환** snap\에서 광고 FS 관리에서 템플릿 규칙 합니다. 이 규칙 템플릿을 다음과 같은 구성 옵션을 제공합니다.  
  
-   클레임은 규칙 이름을 지정합니다  
  
-   지정 된 보내는 클레임 형식 특정 수신 클레임 유형 변형  
  
-   모든 통과 값 주장  
  
-   들어오는 클레임 값을 바꿉니다 다른 보내는 클레임  
  
-   새 메일 e\ 접미사 들어오는 e\ 메일 접미사 클레임 교체  
  
이 서식 만드는 방법에 추가 지침을 참조 [규칙을 수신 클레임 변환 만들어](https://technet.microsoft.com/library/dd807068.aspx) AD FS 배포 가이드에 있습니다.  
  
## <a name="using-the-claim-rule-language"></a>클레임은 규칙 언어를 사용 하 여  
둘 이상의 들어오는 클레임 콘텐츠에서 보내는 클레임 생성 해야, 경우 대신 사용자 지정 규칙을 사용 해야 합니다. 들어오는 클레임 값에 따라 해야 하는 보내는 클레임 클레임 값 경우-추가 콘텐츠도 만들어졌지만 보너스를 사용자 지정 규칙 환경에 사용 해야 합니다. 자세한 내용은 참조 [사용자 지정 클레임 규칙을 사용 하는 경우](When-to-Use-a-Custom-Claim-Rule.md)합니다.  
  
### <a name="examples-of-how-to-construct-a-transform-rule-syntax"></a>변환 규칙 구문 생성 하는 방법 몇 가지  
클레임 규칙 언어 구문을 사용 하 여 순식간 클레임, 새 리터럴 값을 변환 클레임 속성을 설정할 수 있습니다. 예를 들어 다음 규칙 값 역할 클레임 중 "관리자"으로 변경 "루트" 동일한 클레임 유형 하면서:  
  
```  
c:[type == “https://schemas.microsoft.com/ws/2008/06/identity/claims/role”, value == “Administrators”]  => issue(type = c.type, value = “root”);  
```  
  
클레임은 변환에 대 한 일반 표현 사용할 수도 있습니다. 예를 들어, 다음 규칙 FABRIKAM 하려면 windows 사용자 이름 클레임 DOMAIN\\USER 형식에서에 도메인을 설정 됩니다.  
  
```  
c:[type == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"] => issue(type = c.type, value = regexreplace(c.value, "(?<domain>[^\\]+)\\(?<user>.+)", "FABRIKAM\${user}"));  
```  
  
### <a name="best-practices-for-creating-custom-rules"></a>사용자 지정 규칙을 만들기 위한 모범 사례  
클레임 변환은 선택적 필터링 기본 기능을 사용 하 여 선택한 클레임에 적용할 수 있습니다. 일정 값 할당할 수 각 클레임 속성 필터링에 사용 되는 다음과 같습니다.  
  
|속성 주장|설명|  
|------------------|---------------|  
|값, 입력 값|이러한 속성 할당에 대해 가장 자주 사용 됩니다. 변환된 결과 청구에 대 한 최소한 유형 및 값으로 지정 되어야 합니다.|  
|발행인이|클레임 규칙 언어 클레임 발행인이 설정을 통해,이 일반적으로 하지는 것이 좋습니다. 클레임 발행인이 토큰에서 연속 되지 않습니다. 토큰 수신 되 면 모든 클레임 발행인이 속성 토큰 서명 federation 서버의 식별자도 설정 됩니다. 따라서 규칙에 클레임 발행인이 설정 토큰 내용에 영향을 주지 없을 것 하 고 클레임 토큰에 패키지로 제공 되 면 설정을 손실 됩니다. 위치 설정 클레임 발행인이 합리적만 시나리오 클레임 공급자 규칙 설정 및 설정 특정 값이 참조 규칙과 함께 작성 된 신뢰 파티 규칙 특정 값으로 설정 되어 것입니다. 발행인이 속성 명시적으로 설정 되지 않은 경우 클레임 규칙 클레임 발급 엔진에서에서 값 "로컬 권한"를 설정 합니다.|  
|OriginalIssuer|마찬가지로, 발행인이에 OriginalIssuer 해야 일반적으로 명시적으로 지정 되지 값을. 토큰에 연속 OriginalIssuer 속성 발행인이, 달리 하지만 토큰 소비자 예상 되는 설정, 포함 됩니다 클레임 게시 된 federation 서버 식별자입니다.|  
|속성|이전 섹션에 설명 된 대로 할당 속성을 후속 로컬 정책 참조 속성에 저장 된 정보를가 하는 경우에 수행 해야 하므로 클레임의 속성 모음으로 토큰에 유지 되지 않습니다.|  
  
클레임은 규칙 언어를 사용 하는 방법에 대 한 자세한 내용은 참조 [주장 규칙 언어의 The 역할](The-Role-of-the-Claim-Rule-Language.md)합니다.  
  

