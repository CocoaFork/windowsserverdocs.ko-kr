---
ms.assetid: b11f7a65-ec7b-4c11-8dc4-d7cabb54cd94
title: Active Directory 복제 문제 해결
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: ffc0933f70a2ab518c575a944efdac4c2dcd6a1a
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59869424"
---
# <a name="troubleshooting-active-directory-replication-problems"></a>Active Directory 복제 문제 해결

>적용 대상: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Active Directory 복제 문제에는 여러 다른 원본 있을 수 있습니다. 예를 들어, 도메인 이름 시스템 (DNS) 문제, 네트워킹 문제 또는 보안 문제가 발생할 수 있습니다 모든 Active Directory 복제가 실패할 수 있습니다. 

도구 및 Active Directory 복제 오류를 해결 하는 일반적인 방법은이 항목의 나머지 부분에 설명 합니다. 다음 하위 항목 증상, 원인 및 특정 복제 오류를 해결 하는 방법을 설명 합니다.

## <a name="introduction-and-resources-for-troubleshooting-active-directory-replication"></a>소개 및 Active Directory 복제 문제 해결을 위한 리소스

인바운드 또는 아웃 바운드 복제 실패로 인해 복제 토폴로지, 복제 일정, 도메인 컨트롤러, 사용자, 컴퓨터, 암호, 보안 그룹, 그룹 멤버 자격 및 그룹 정책 일관 되지 않을 수를 나타내는 개체를 Active Directory 도메인 컨트롤러 사이. 디렉터리 불일치 및 복제 실패 작업 실패 또는 작업에 연결 하는 도메인 컨트롤러에 따라 일관성 없는 결과가 발생 하 고 그룹 정책 적용을 차단할 고 액세스 제어 권한을 수 있습니다. Active Directory Domain Services (AD DS) 네트워크 연결, 이름 확인, 인증 및 권한 부여, 디렉터리 데이터베이스, 복제 토폴로지 및 복제 엔진에 따라 달라 집니다. 복제 문제의 근본 원인을 즉시 알 수 없는 경우 가능한 원인의 체계적인 제거가 필요 많은 원인은 원인을 파악 합니다.

복제를 모니터링 하 고 오류를 진단 하는 데는 UI 기반 도구를 참조 하세요. [Active Directory 복제 상태 도구](https://www.microsoft.com/download/details.aspx?id=30005)

Repadmin 도구를 사용 하 여 Active Directory 문제를 해결 하는 방법을 설명 하는 포괄적인 문서에 대 한 복제를 사용할 수 있습니다. 참조 [모니터링 및 문제 해결 Active Directory 복제를 사용 하 여 Repadmin](https://go.microsoft.com/fwlink/?LinkId=122830)합니다.

Active Directory 복제 작동 방법에 대 한 내용은 다음 기술 참조를 참조 하세요.

- [Active Directory 복제 모델에 대 한 기술 참조](https://go.microsoft.com/fwlink/?LinkId=65958)
- [Active Director의 복제 토폴로지 기술 참조](https://go.microsoft.com/fwlink/?LinkId=93578)

## <a name="event-and-tool-solution-recommendations"></a>이벤트 및 도구 솔루션 권장 사항

이상적으로 빨강 (오류) 및 디렉터리 서비스 이벤트 로그에 노란색 (경고) 이벤트를 특정 제약 조건이 원본 또는 대상 도메인 컨트롤러에서 복제 오류를 발생 시키는 것이 좋습니다. 이벤트 메시지는 솔루션에 대 한 단계를 제안 하 고 이벤트에 설명 된 단계를 시도 합니다. 또한 Repadmin 도구 및 기타 진단 도구에는 복제 오류를 해결 하는 데 유용한 정보를 제공 합니다. 

Repadmin을 사용 하 여 복제 문제를 해결 하는 방법에 대 한 자세한 내용은 [모니터링 및 문제 해결 Active Directory 복제를 사용 하 여 Repadmin](https://go.microsoft.com/fwlink/?LinkId=122830)합니다.

## <a name="ruling-out-intentional-disruptions-or-hardware-failures"></a>의도적인 중단 또는 하드웨어 오류를 배제

경우에 따라 의도적인 중단으로 인해 복제 오류가 발생 합니다. 예를 들어, Active Directory 복제 문제를 해결할 때 규칙 의도적인 연결 끊김 및 하드웨어 오류 또는 업그레이드 먼저입니다.

### <a name="intentional-disconnections"></a>의도적인 연결 끊김

스테이징 사이트에서 빌드되고 현재 오프 라인 상태입니다 (원격 사이트에서 지사와 같은 최종 프로덕션 사이트의 배포를 대기 하는 도메인 컨트롤러를 사용 하 여 복제를 시도 하는 하는 도메인 컨트롤러에서 복제 오류를 보고 하는 경우 )를 해당 복제 오류를 처리할 수 있습니다. 그러면 연속 오류 도메인 컨트롤러에 다시 연결 될 때까지, 오랫동안 복제 토폴로지에서 도메인 컨트롤러를 분리 하지 않으려면 이러한 컴퓨터를 처음에 구성원 서버로 추가 하 고 (미디어에서에서 설치를 사용 하는 것이 좋습니다 Active Directory Domain Services (AD DS) 설치 IFM) 메서드. 이동식 미디어 (CD, DVD 또는 기타 미디어)에 저장할 수 있으며 대상 사이트에 제공 되는 설치 미디어를 만드는 Ntdsutil 명령줄 도구를 사용할 수 있습니다. 그런 다음 복제를 사용 하지 않고 사이트의 도메인 컨트롤러에서 AD DS를 설치 하려면 설치 미디어를 사용할 수 있습니다. 

### <a name="hardware-failures-or-upgradestitle"></a>하드웨어 오류 또는 업그레이드</title>

하드웨어 오류 (예를 들어, 마더보드, 디스크 하위 시스템 또는 하드 드라이브의 오류)으로 인해 복제 문제가 발생 하면 해당 하드웨어 문제를 해결할 수 있도록 서버 소유자를 게 알립니다.

정기적인 하드웨어 업그레이드는 서비스를 중단 하려면 도메인 컨트롤러를 일으킬 수도 있습니다. 이러한 작동 중단을 사전에 통신의 효율적인 시스템에 서버 소유자 있는지 확인 하십시오.

### <a name="firewall-configuration"></a>방화벽 구성

기본적으로 Active Directory 복제 원격 프로시저 호출 (Rpc) 포트 135에서 RPC 끝점 매퍼 (RPCSS)를 통해 사용 가능한 포트를 통해 동적으로 발생 합니다. 고급 보안이 포함 된 Windows 방화벽 및 기타 방화벽 복제에 대 한 허용 하도록 제대로 구성 되어 있는지 확인 합니다. Active Directory 복제 및 포트 설정에 대 한 포트를 지정 하는 방법에 대 한 내용은 [224196 Microsoft 기술 자료 문서](https://go.microsoft.com/fwlink/?LinkId=22578)합니다. 

Active Directory 복제를 사용 하는 포트에 대 한 자세한 내용은 [Active Directory 복제 도구 및 설정](https://go.microsoft.com/fwlink/?LinkId=123774)합니다.

방화벽을 통해 Active Directory 복제를 관리 하는 방법에 대 한 내용은 [방화벽을 통해 Active Directory 복제](https://go.microsoft.com/fwlink/?LinkId=123775)합니다.

## <a name="responding-to-failure-of-an-outdated-server-running-windows-2000-server"></a>Windows 2000 Server를 실행 하는 오래 된 서버 실패에 응답

삭제 표시 수명 기간 보다 오랫동안 Windows 2000 Server를 실행 하는 도메인 컨트롤러에 실패 하는 경우 솔루션은 항상 동일 합니다. 

1. 회사 네트워크에서 서버를 개인 네트워크를 이동 합니다.
2. 강제로 제거 Active Directory 또는 운영 체제를 다시 설치 합니다.
3. 서버 개체를 다시 사용할 수 없습니다 있도록 Active Directory에서 서버 메타 데이터를 제거 합니다. 

대부분의 Windows 운영 체제에서 서버 메타 데이터를 정리 하는 스크립트를 사용할 수 있습니다. 이 스크립트를 사용 하는 방법에 대 한 내용은 [제거 Active Directory 도메인 컨트롤러 메타 데이터가](https://go.microsoft.com/fwlink/?LinkID=123599)합니다. 

기본적으로 14 일 동안 자동으로 삭제 된 NTDS 설정 개체는 다시 합니다. 따라서 서버 메타 데이터를 제거 하지 않은 경우 (Ntdsutil 또는 메타 데이터 정리를 수행 하려면 이전에 언급 된 스크립트 사용) 되려면 복제 시도 라는 디렉터리에 서버 메타 데이터 정보가 복원 됩니다. 이 경우 오류 누락 된 도메인 컨트롤러와 복제할 수 없으므로 결과로 영구적으로 기록 됩니다.

## <a name="root-causes"></a>근본 원인

의도적인 연결 끊김, 하드웨어 오류 및 오래 된 Windows 2000 도메인 컨트롤러를 배제 복제 문제 나머지 거의 항상 경우 다음과 같은 근본 원인 중 하나:

- 네트워크 연결: 네트워크 연결을 사용할 수 있습니다 또는 네트워크 설정이 제대로 구성 되지 않습니다.
- 이름 확인: DNS 구성 오류는 복제 오류의 일반적인 원인입니다.
- 인증 및 권한 부여: 인증 및 권한 부여 문제 도메인 컨트롤러에서 복제 파트너에 연결 하려고 할 때 "액세스 거부" 오류가 발생 합니다.
- 디렉터리 데이터베이스 (저장소): 디렉터리 데이터베이스 복제 시간 제한이 있는 유지할 트랜잭션을 충분히 빠르게 처리할 수 있습니다.
- 복제 엔진: 사이트 간 복제 일정에 너무 짧은 경우에 복제 큐에 아웃 바운드 복제 일정에 따라 필요한 처리 하는 데 너무 클 수 있습니다. 이 경우 일부 변경 내용 복제를 무기한 잠재적으로 제거한 다음, 삭제 표식 수명이 초과할 때까지 수 있습니다.
- 복제 토폴로지: 도메인 컨트롤러에는 실제 광역 네트워크 (WAN) 또는 가상 사설망 (VPN) 연결에 매핑되는 AD DS에서 사이트 간 링크가 있어야 합니다. 네트워크의 실제 사이트 토폴로지에 의해 지원 되지 않는 복제 토폴로지에 대 한 AD DS에서 개체를 만들어야 하는 경우에 잘못 구성 된 토폴로지를 필요한 복제가 실패 합니다.

## <a name="general-approach-to-fixing-problems"></a>문제를 해결 하는 일반적인 방법

복제 문제를 해결 하려면 다음과 같은 일반적인 접근 방식 사용: 

1. 매일, 복제 상태를 모니터링 하거나 Repadmin.exe를 사용 하 여 복제 상태를 매일 검색 합니다.
2. 이벤트 메시지 및이 가이드에 설명 된 메서드를 사용 하 여 적시에 보고 된 오류를 해결 하려고 합니다. 소프트웨어 문제를 일으킬 수 있습니다, 다른 솔루션을 사용 하 여 계속 하기 전에 소프트웨어를 제거 합니다.
3. 모든 알려진된 방법으로 복제 실패를 일으키는 문제를 해결할 수 없습니다, 하는 경우 서버에서 AD DS를 제거 하 고 제거한 다음 AD DS 합니다. AD DS를 다시 설치 하는 방법에 대 한 자세한 내용은 참조 하세요. [도메인 컨트롤러 서비스 해제](https://go.microsoft.com/fwlink/?LinkId=128290)합니다.
4. AD DS를 제거할 수 없는 일반적으로 서버는 네트워크에 연결 하는 경우 문제를 해결 하려면 다음 방법 중 하나를 사용 합니다.

   - 서버 메타 데이터 정리에 DSRM 디렉터리 서비스 복원 모드 (), AD DS 제거를 강제로 하 고 AD DS를 다시 설치 하십시오.
   - 운영 체제를 다시 설치 하 고 도메인 컨트롤러를 다시 빌드하십시오.

AD DS 제거를 강제 적용 하는 방법에 대 한 자세한 내용은 참조 하세요. [도메인 컨트롤러의 제거를 강제로](https://go.microsoft.com/fwlink/?LinkId=128291)입니다.

## <a name="using-repadmin-to-retrieve-replication-statustitle"></a>Repadmin을 사용 하 여 복제 상태를 검색 합니다.</title>

복제 상태는 디렉터리 서비스의 상태를 평가 하는 중요 한 방법입니다. 복제 오류 없이 작동 하는 경우 온라인 상태인 도메인 컨트롤러를 알 수 있습니다. 또한 다음 시스템 및 서비스 작동 하는지 알 수 있습니다:


- DNS 인프라
- Kerberos 인증 프로토콜
- Windows 시간 서비스 (w32time))
- 원격 프로시저 호출 (RPC)
- 네트워크 연결

포리스트의 모든 도메인 컨트롤러의 복제 상태를 평가 하는 명령을 실행 하 여 복제 상태를 매일 모니터링할 Repadmin을 사용 합니다. 프로시저는 Microsoft Excel 및 복제 오류에 대 한 필터에서 열 수 있는.csv 파일을 생성 합니다.

포리스트의 모든 도메인 컨트롤러의 복제 상태를 검색 하려면 다음 절차를 사용할 수 있습니다. 

요구 사항

이 절차를 완료하려면 최소한 **Enterprise Admins** 그룹의 구성원이거나 이와 동등한 자격이 있어야 합니다. 

도구:

- Repadmin.exe
- Excel (Microsoft Office)

### <a name="to-generate-a-repadmin-showrepl-spreadsheet-for-domain-controllers"></a>도메인 컨트롤러에 대 한 repadmin /showrepl 스프레드시트를 생성 하려면

1. 관리자 권한으로 명령 프롬프트를 엽니다. 시작 메뉴의 명령 프롬프트를 마우스 오른쪽 단추로 클릭 하 고 관리자 권한으로 실행을 클릭 합니다. 사용자 계정 컨트롤 대화 상자가 나타나면 필요한 경우 엔터프라이즈 관리자 자격 증명을 입력 하 고 계속을 클릭 합니다.
2. 명령 프롬프트에서 다음 명령을 입력 하 고 ENTER를 누릅니다. `repadmin /showrepl * /csv > showrepl.csv`
3. Excel을 엽니다.
4. Office 단추를 클릭, 열기, showrepl.csv로 이동 및 열기를 클릭 합니다.
5. 숨기 거 나는 열 뿐만 아니라 전송 형식 열을 다음과 같이 삭제 합니다.
6. 숨기기 또는 삭제 하려는 열을 선택 합니다.

   - 열을 숨기려면 열을 마우스 오른쪽 단추로 클릭 하 고 숨기기를 클릭 합니다.
   - 열을 삭제 하려면 선택된 된 열을 마우스 오른쪽 단추로 클릭 하 고 삭제를 클릭 합니다.

7. 열 머리글 행 아래에 있는 1 행을 선택 합니다. 보기 탭의 틀 고정을 클릭 하 고 맨 위에 고정 행을 클릭 합니다.
8. 전체 스프레드시트를 선택 합니다. 데이터 탭의 필터를 클릭 합니다.
9. 성공 마지막 열에서 아래쪽 화살표를 클릭 하 고 오름차순을 클릭 합니다.
10. 원본 DC 열에 텍스트 필터를 필터 아래쪽 화살표를 클릭, 가리키고 사용자 지정 필터를 클릭 합니다.
11. 사용자 지정 자동 필터 대화 상자에서 클릭에, 포함 하지 않는 행을 표시 합니다. 인접 한 입력란에 입력 <userInput>del</userInput> 결과 보기에서 제거 하려면 도메인 컨트롤러를 삭제 합니다.
12. 오류 마지막 열으로 매핑 되었지만 값 같음 하지 않으며 값 0을 입력 한 다음 사용에 대 한 11 단계를 반복 합니다.
13. 복제 오류를 해결 합니다.

스프레드시트 포리스트의 모든 도메인 컨트롤러에 대 한 원본 복제 파트너를 보여 줍니다에 복제가 마지막으로 발생 한 및 각 명명 컨텍스트 (디렉터리 파티션)에 대 한 마지막 복제 실패가 발생 한 시간입니다. 자동 필터를 Excel에서 사용 하 여 도메인 컨트롤러에만 또는 도메인 컨트롤러에 최소 또는 대부분의 현재 장애 도메인 컨트롤러에만 작업에 대 한 복제 상태를 볼 수 있습니다. 하 고 복제는 복제 파트너를 볼 수 있습니다. 성공적으로 합니다.

## <a name="replication-problems-and-resolutions"></a>복제 문제 및 해결 방법

복제 문제는 응용 프로그램 또는 서비스 작업을 시도 하는 경우 발생 하는 다양 한 오류 메시지 및 이벤트 메시지에 보고 됩니다. 이상적으로 이러한 메시지는 복제 상태를 검색할 때 또는 모니터링 응용 프로그램에서 수집 됩니다.

대부분의 복제 문제는 디렉터리 서비스 이벤트 로그에 기록 된 이벤트 메시지에서 식별 됩니다. 복제 문제의 출력에 오류 메시지의 형태로 식별 될 수 있습니다 합니다 <system>repadmin /showrepl</system> 명령입니다.

### <a name="repadmin-showrepl-error-messages-that-indicate-replication-problems"></a>복제 문제를 나타내는 repadmin /showrepl 오류 메시지

Active Directory 복제 문제를 식별 하려면 사용 합니다 <system>repadmin /showrepl</system> 이전 섹션에 설명 된 대로 명령을 합니다. 다음 표에서 오류 및 오류에 대 한 솔루션을 제공 하는 항목에 대 한 링크의 근본 원인와 함께이 명령은 생성 된 오류 메시지를 보여 줍니다.

|Repadmin 오류|근본 원인|해결 방법|
| --- | --- | --- |
|이 사용 하 여 마지막 복제 이후 시간 서버가 삭제 표시 수명을 초과 했습니다.|도메인 컨트롤러에 복제 하 고 AD DS에서 가비지 수집 삭제 표시가 되어 삭제에 대 한 충분 한 긴 명명 된 원본 도메인 컨트롤러를 사용 하 여 인바운드 복제에 실패 했습니다.|Event ID 2042: 이 너무 오랜 시간이 지났습니다이 컴퓨터 복제|
|인바운드 환경을 합니다.|항목이 표시 되지 않으면 repadmin /showrepl에서 생성 되는 출력의 "인바운드 환경" 섹션에서 도메인 컨트롤러가 다른 도메인 컨트롤러를 사용 하 여 복제 링크를 설정할 수 없습니다.|복제 연결 문제 해결(이벤트 ID 1925)| 
|액세스가 거부되었습니다.|두 도메인 컨트롤러 간의 복제 링크 있지만 인증 실패로 인해 복제를 제대로 수행할 수 없습니다.|복제 보안 문제 해결| 
|마지막 시도 < 날짜-시간 >에 "대상 계정 이름이 잘못 되었습니다."와 실패|이 문제는 연결, DNS 또는 인증 문제를 연결할 수 있습니다. 로컬 도메인 컨트롤러의 전역 고유 식별자 (GUID)을 확인할 수 없습니다 DNS 오류 이면-해당 복제 파트너의 DNS 이름을 기반으로 합니다.|해결 복제 DNS 조회 (이벤트 Id 1925, 2087, 2088) 문제 해결 복제 보안 문제 복제 연결 문제 해결 (이벤트 ID 1925)| 
|LDAP 49에 오류가 발생 했습니다.|도메인 컨트롤러 컴퓨터 계정의 키 배포 센터 (KDC)를 사용 하 여 동기화 되지 않을 수 있습니다.|복제 보안 문제 해결| 
|로컬 호스트에 대 한 LDAP 연결을 열 수 없습니다.|관리 도구를 AD DS에 연결할 수 없습니다.|복제 DNS 조회 문제 해결(이벤트 ID 1925, 2087, 2088)| 
|Active Directory 복제 선취 했습니다.|인바운드 복제 진행률 repadmin /sync 명령을 사용 하 여 수동으로 생성 된 요청과 같이 우선 순위가 높은 복제 요청에 의해 중단 되었습니다.|복제가 완료 될 때까지 기다립니다. 이 정보 메시지는 정상적인 작업을 나타냅니다.| 
|대기 중인 복제 게시입니다.| 도메인 컨트롤러 복제 요청을 게시 및 답변을 기다리고 있습니다. 복제가이 소스에서 진행 중입니다.|복제가 완료 될 때까지 기다립니다. 이 정보 메시지는 정상적인 작업을 나타냅니다.| 

다음 표에서 문제 및 문제에 대 한 솔루션을 제공 하는 항목에 대 한 링크의 복제의 경우 루트와 함께 사용 하면 Active Directory를 사용 하 여 문제를 나타낼 수 있는 일반적인 이벤트를 나열 합니다. 

|원본과 이벤트 ID|근본 원인|해결 방법|
| --- | --- | --- | 
|1311 NTDS KCC|AD DS에서 복제 구성 정보를 네트워크의 실제 토폴로지를 정확 하 게 반영 하지 않습니다.|복제 토폴로지 문제 해결(이벤트 ID 1311)| 
|1388 NTDS 복제|엄격한 복제 일관성을 적용 되지 않으면, 느린 개체가 도메인 컨트롤러에 복제 되었습니다.|복제 느린 개체 문제 해결(이벤트 ID 1388, 1988, 2042)|
|1925 NTDS KCC|쓰기 가능한 디렉터리 파티션의 복제 링크를 설정 하지 못했습니다. 이 이벤트는 오류에 따라 다양 한 원인이 있을 수 있습니다.| 해결 복제 연결 문제 (이벤트 ID 1925) 해결 복제 DNS 조회 문제 (이벤트 Id 1925, 2087, 2088)| 
|1988 NTDS 복제|로컬 도메인 컨트롤러를 해당 수 삭제 되어 이미 가비지로 수집 되므로 로컬 도메인 컨트롤러에서 존재 하지 않는 원본 도메인 컨트롤러에서 개체를 복제 하려고 했습니다. 상황이 해결 될 때까지이 파트너를 사용 하 여이 디렉터리 파티션에 대 한 복제가 진행 되지 않습니다.|복제 느린 개체 문제 해결(이벤트 ID 1388, 1988, 2042)|
|2042 NTDS 복제|삭제 표시 수명에 대 한이 파트너를 사용 하 여 복제가 발생 하지 않은 하 고 복제를 계속할 수 없습니다.|복제 느린 개체 문제 해결(이벤트 ID 1388, 1988, 2042)| 
|2087 NTDS 복제|AD DS는 IP 주소 및 실패 한 복제 원본 도메인 컨트롤러의 DNS 호스트 이름을 확인할 수 없습니다.|복제 DNS 조회 문제 해결(이벤트 ID 1925, 2087, 2088)| 
|2088 NTDS 복제 |AD DS IP 주소가 없지만 성공 복제 원본 도메인 컨트롤러의 DNS 호스트 이름을 확인할 수 없습니다.|복제 DNS 조회 문제 해결(이벤트 ID 1925, 2087, 2088)|
|Net Logon 5805|컴퓨터 계정 이름이 같은 컴퓨터의 여러 인스턴스 또는 모든 도메인 컨트롤러를 복제 하지 않는 컴퓨터 이름으로 일반적으로 발생 하는 인증 하지 못했습니다.|복제 보안 문제 해결| 

복제 개념에 대 한 자세한 내용은 참조 하세요. [Active Directory 복제 토폴로지](https://go.microsoft.com/fwlink/?LinkId=41950)합니다.
  
## <a name="next-steps"></a>다음 단계

자세한 내용은 지원을 비롯 하 여 특정 오류 코드 문서 문서를 참조 지원. [일반적인 Active Directory 복제 오류를 해결 하는 방법](https://support.microsoft.com/help/3108513)
