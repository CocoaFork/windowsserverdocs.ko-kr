---
title: RD 웹 및 게이트웨이 웹 프런트 고가용성 추가
description: RDS 배포에 RD 웹 및 게이트웨이 서버를 설치 하는 단계를 설명 합니다.
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: remote-desktop-services
ms.tgt_pltfrm: na
ms.topic: article
author: lizap
ms.author: elizapo
ms.date: 11/08/2016
manager: dongill
ms.openlocfilehash: 4e185e51b09d2e2f8ac4527f9de339de27e02f24
ms.sourcegitcommit: d888e35f71801c1935620f38699dda11db7f7aad
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/07/2019
ms.locfileid: "66805142"
---
# <a name="add-high-availability-to-the-rd-web-and-gateway-web-front"></a>RD 웹 및 게이트웨이 웹 프런트 고가용성 추가

>적용 대상: Windows Server (반기 채널), Windows Server 2019, Windows Server 2016


가용성과 Windows Server 원격 데스크톱 서비스 (RDS) 배포의 규모를 개선 하기 위해 원격 데스크톱 웹 액세스 (RD 웹 액세스) 및 원격 데스크톱 게이트웨이 (RD 게이트웨이) 팜을 배포할 수 있습니다. 

기존 원격 데스크톱 서비스 기본 배포에 RD 웹 및 게이트웨이 서버를 추가 하려면 다음 단계를 사용 합니다.  

## <a name="pre-requisites"></a>필수 구성 요소

추가 RD 웹 및 RD 게이트웨이 역할을 서버를 설정 합니다.이 물리적 서버 또는 VM 수 있습니다. 여기에 서버를 도메인에 가입 하 고 원격 관리를 사용 하도록 설정 합니다.

## <a name="step-1-configure-the-new-server-to-be-part-of-the-rds-environment"></a>1단계: RDS 환경에 포함 되도록 새 서버 구성

1. 원격 데스크톱 연결 클라이언트를 사용 하 여 Azure portal에서 RDMS 서버에 연결 합니다.
2. 서버 관리자에 새 게이트웨이 및 RD 웹 서버를 추가 합니다.
    1. 서버 관리자를 시작, 클릭 **관리 > 서버 추가**합니다.   
    2. 서버 추가 대화 상자에서 클릭 **지금 찾기**합니다.   
    3. 새로 만든된 된 RD 웹 및 게이트웨이 서버 (예: Contoso-WebGw2)를 선택 하 고 클릭 **확인**합니다.
3. 배포에 RD 웹 및 게이트웨이 서버를 추가 합니다.  
    1. 서버 관리자를 시작 합니다.  
    2. 클릭 **원격 데스크톱 서비스 > 개요 > 배포 서버 > 작업 > RD 웹 액세스 서버를 추가**합니다.   
    3. (예를 들어 Contoso-WebGw2), 새로 만든된 서버를 선택한 다음 클릭 **다음**합니다.  
    4. 선택 확인 페이지에서 **필요에 따라 원격 컴퓨터를 다시 시작**, 를 클릭 하 고 **추가**합니다.  
    5. RD 게이트웨이 서버를 추가 하지만 선택 하려면 다음이 단계를 반복 **RD 게이트웨이 서버** b 단계에서 합니다.
4. RD 게이트웨이 서버에 대 한 인증서를 다시 설치 합니다.
   1. 서버 관리자에서 RDMS 서버의 **원격 데스크톱 서비스 > 개요 > 작업 > 배포 속성 편집**합니다.  
   2. 확장 **인증서**합니다.  
   3. 테이블까지 아래로 스크롤하십시오. RD 클릭 **게이트웨이 역할 서비스 > 기존 인증서를 선택 합니다.**  
   4. 클릭 **다른 인증서를 선택** 인증서 위치를 이동 합니다. 예를 들어 \Contoso-CB1\Certificates). 필수 구성 요소 (예: ContosoRdGwCert) 중에 생성 하는 RD 웹 및 게이트웨이 서버에 대 한 인증서 파일을 선택한 다음 클릭 **열려**합니다.  
   5. 인증서 선택에 대 한 암호를 입력 **대상 컴퓨터의 신뢰할 수 있는 루트 인증 기관 인증서 저장소에 추가할 인증서 허용**를 클릭 하 고 **확인**합니다.  
   6. **적용**을 클릭합니다.
      > [!NOTE] 
      > 서버 관리자 또는 작업 관리자를 통해 각 RD 게이트웨이 서버에서 실행 되는 TSGateway 서비스를 수동으로 다시 시작 해야 합니다.
   7. A부터 f RD 웹 액세스 역할 서비스에 대 한 단계를 반복 합니다.

## <a name="step-2-configure-rd-web-and-rd-gateway-properties-on-the-new-server"></a>2단계: 새 서버에서 RD 웹 및 RD 게이트웨이 속성을 구성 합니다.
1. RD 게이트웨이 팜의 일부가 되도록 서버를 구성 합니다.
    1.  서버 관리자에서 RDMS 서버의 **모든 서버**합니다. RD 게이트웨이 서버 중 하나를 마우스 오른쪽 단추로 누른 **원격 데스크톱 연결**합니다.
    2.  도메인 관리자 계정을 사용 하 여 RD 게이트웨이 서버에 로그인 합니다.  
    3.  서버 관리자에서 RD 게이트웨이 서버의 **도구 > 원격 데스크톱 서비스 > RD 게이트웨이 관리자**합니다.  
    4.  탐색 창에서 로컬 컴퓨터 (예: Contoso WebGw1)를 클릭 합니다.  
    5.  클릭 **RD 게이트웨이 서버 팜 추가 멤버**합니다.  
    6.  에 **서버 팜** 탭, 각 RD 게이트웨이 서버의 이름을 입력 하 고 클릭 **추가** 하 고 **적용**합니다.  
    7.  A부터 f는 팜에서 RD 게이트웨이 서버를 서로 인식 이러한 각 RD 게이트웨이 서버의 단계 반복 합니다. 수행 하지 않더라도 경고가 표시 경고가 있는 경우, 대로 DNS 설정이 전파 되려면 시간이 걸릴 수 있습니다.
2. RD 웹 액세스 팜의 일부가 되도록 서버를 구성 합니다. 아래 단계는 모두 RDWeb 사이트에서 동일한 유효성 검사 및 암호 해독 컴퓨터 키를 구성 합니다.
    1.  서버 관리자에서 RDMS 서버의 **모든 서버**합니다. 첫 번째 RD 웹 액세스 서버 (예: Contoso WebGw1)를 마우스 오른쪽 단추로 누른 **원격 데스크톱 연결**합니다.  
    2.  도메인 관리자 계정을 사용 하 여 RD 웹 액세스 서버에 로그인 합니다.  
    3.  서버 관리자에서 RD 웹 액세스 서버에서 클릭 **도구 > 인터넷 정보 서비스 (IIS) 관리자**합니다.  
    4.  IIS 관리자의 왼쪽된 창에서 확장을 **서버 (예: Contoso WebGw1) > 사이트 > 기본 웹 사이트**를 클릭 하 고 **RDWeb**합니다.  
    5.  마우스 오른쪽 단추로 클릭 **컴퓨터 키**를 클릭 하 고 **기능 열기**합니다.
    6.  컴퓨터 키 페이지에서에 **작업** 창 **키 생성**를 클릭 하 고 **적용**합니다.
    7.  유효성 검사 키 (키를 마우스 오른쪽 단추로 클릭 하 고 클릭 **복사**.)
    8.  IIS 관리자에서 아래 **기본 웹 사이트**를 선택 **피드**를 **FeedLogon** 및 **페이지** 다시 합니다.
    9. 각:
        1.  마우스 오른쪽 단추로 클릭 **컴퓨터 키**를 클릭 하 고 **기능 열기**합니다.
        2.  유효성 검사 키를 선택 취소 **런타임에 자동 생성**, g 단계에서 복사한 키를 붙여넣습니다.
    10.  이 RD 웹 서버에 RD 연결 창을 최소화 합니다.  
    11.  기능 보기에서 종료, 두 번째 RD 웹 액세스 서버에 대해 단계 b부터 e까지를 반복 **컴퓨터 키**합니다.
    12. 유효성 검사 키를 선택 취소 **런타임에 자동 생성**, g 단계에서 복사한 키를 붙여넣습니다.
    13. **적용**을 클릭합니다.
    14. 이 프로세스를 완료 합니다 **RDWeb**, **피드**, **FeedLogon** 하 고 **페이지** 페이지입니다.
    15. 두 번째 RD 웹 액세스 서버에 RD 연결 창을 최소화 하 고 첫 번째 RD 웹 액세스 서버에 RD 연결 창을 최대화 합니다.  
    16. 암호 해독 키를 통해 복사 하려면 n 통해 g 단계를 반복 합니다.
    17. 유효성 검사 키와 암호 해독 키에 대 한 두 RD 웹 액세스 서버에서 동일한 경우 합니다 **RDWeb**, **피드**, **FeedLogon** 고 **페이지**페이지에서 모든 RD 연결 windows 로그 아웃 합니다.

## <a name="step-3-configure-load-balancing-for-the-rd-web-and-rd-gateway-servers"></a>3단계: RD 웹 및 RD 게이트웨이 서버에 대해 부하 분산 구성

Azure 인프라를 사용 하는 경우에 외부 Azure load balancer;을 만들 수 있습니다. 그렇지 않은 경우 별도 하드웨어 또는 소프트웨어 부하 분산 장치를 설정할 수 있습니다. 부하 분산 되도록 트래픽을 균등 하 게 키를은 사용자 워크 로드 실행 되어야 하는 서버에 RD 게이트웨이 통해 원격 데스크톱 클라이언트의 수명이 연결을 분산 합니다.

> [!NOTE] 
> RD 웹 및 RD 게이트웨이 실행 하는 이전 서버를 이미 외부 부하 분산 장치 뒤를 설정 하는 경우 건너 뛰 세요 4 단계, 기존 백 엔드 풀을 선택 하 고, 풀에 새 서버를 추가 합니다.

1.  Azure Load Balancer를 만듭니다.  
    1.  Azure 포털에서 **찾아보기 > 부하 분산 장치 > 추가**합니다.  
    2.  예를 들어 이름을 입력 **WebGwLB**합니다.  
    3.  선택 **공개** 에 대 한 합니다 **구성표**, **공용 IP 주소**, 및 **공용 IP 주소**합니다. 기존 공용 IP 주소를 선택 하거나 새로 만들 수 있습니다. 
    4.  적절 한 선택 **구독**하십시오 **리소스 그룹**, 및 **위치**합니다.
    5.  **만들기**를 클릭합니다.  
2. 만들기는 [프로브](https://azure.microsoft.com/documentation/articles/load-balancer-custom-probe-overview/) 연결 된 서버를 모니터링 하려면:  
    1.  Azure 포털에서 **찾아보기 > 부하 분산 장치**., 부하 분산 장치를 방금 만든 WebGwLB, 및 설정 예:  
    2.  클릭 **프로브 > 추가**합니다.  
    3.  예를 들어, 이름을 입력 **HTTPS**를 검색 합니다. 선택 **TCP** 으로 **프로토콜**, enter **443** 에 대 한 합니다 **포트**를 클릭 **확인**.   
3.  HTTPS 및 UDP 부하를 분산 규칙을 만듭니다.  
    1.  **설정을**, 클릭 **부하 분산 규칙**합니다.  
    2.  선택 **추가** 에 대 한 합니다 **HTTPS 규칙**합니다.  
    3.  예를 들어 HTTPS 규칙의 이름을 입력 하 고 선택 **TCP** 에 대 한 합니다 **프로토콜**합니다. 입력 **443** 둘 다에 대 한 **포트** 하 고 **백 엔드 포트**를 클릭 하 고 **확인**합니다.  
    4.  **부하 분산 규칙**, 클릭 **추가** 에 대 한 합니다 **UDP 규칙**합니다.  
    5.  예를 들어, 규칙의 이름을 입력 **UDP**, 선택한 **UDP** 에 대 한 합니다 **프로토콜**합니다. 입력 **3391** 둘 다에 대 한 **포트** 하 고 **백 엔드 포트**를 클릭 하 고 **확인**합니다.  
4. RD 웹 및 RD 게이트웨이 서버에 대 한 백 엔드 풀을 만듭니다.
      1. **설정을**, 클릭 **백 엔드 주소 풀 > 추가**합니다.   
      2. 이름을 입력 (예를 들어 **WebGwBackendPool**)를 클릭 한 다음 **가상 머신 추가**합니다.  
      3. 가용성 집합 (예를 들어 WebGwAvSet)를 선택 하 고 클릭 **확인**합니다.   
      4. 클릭 **virtual machines 선택**각 가상 머신을 선택 하 고 클릭 **선택 > 확인 > 확인**합니다.
