---
title: "자격 증명 프로세스 Windows 인증"
description: "Windows Server 보안"
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-windows-auth
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 48c60816-fb8b-447c-9c8e-800c2e05b14f
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 52d50a1bb6bfbe9d35146f362a2a5184df0a6504
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/12/2017
---
# <a name="credentials-processes-in-windows-authentication"></a>자격 증명 프로세스 Windows 인증

>적용 대상: Windows Server (세미콜론 연간 채널) Windows Server 2016

여기 참조 IT 전문가 위한 Windows 인증 자격 증명을 처리 하는 방법을 설명 합니다.

Windows 자격 증명 관리 하는 운영 체제 사용자 또는 서비스에서 자격 증명을 받는 이후 프레젠테이션 인증 대상에 대 한 정보를 보호 하는 프로세스는입니다. 도메인 가입 컴퓨터의 경우 인증 대상 도메인 컨트롤러입니다. 인증에 사용 되는 자격 증명은 몇 가지 형태의 정품 인증서를 암호나 PIN 같이 증명 하는 사용자의 id를 연결 하는 디지털 문서 합니다.

기본적으로 로컬 컴퓨터에서 보안 계정을 관리자 (삼로) 데이터베이스에 대해 또는 Winlogon 서비스를 통해 도메인에 가입 컴퓨터에 대 한 Active Directory에 대해 Windows 자격 증명을 확인 합니다. 자격 증명 로그온 사용자 인터페이스에서 또는 응용 프로그램 프로그래밍 인터페이스 인증 대상에 게 표시할 (API)를 통해 프로그래밍 방식으로 사용자 입력을 통해 수집 됩니다.

로컬 보안 정보는 레지스트리의에 저장 된 **HKEY_LOCAL_MACHINE\SECURITY**합니다. 저장 된 정보 정책 설정, 기본값 보안 캐시 로그온 자격 증명 등 계정 정보를 포함 합니다. 쓰기 암호로 보호 된 이지만 삼로 데이터베이스의 복사본을 여기에서 저장 됩니다.

다음 그림 사용자나 성공 로그온 한 프로세스 인증을 자격 증명 시스템을 통해 수행 요구 되는 구성 요소와 경로 표시 됩니다.

![자격 증명을 요구 되는 구성 요소와 경로 보여 주는 다이어그램 시스템을 통해 사용자 또는 성공 로그온 한 프로세스 인증을 수행 합니다.](../media/credentials-processes-in-windows-authentication/AuthN_LSA_Architecture_Client.gif)

다음 표에서 로그온 시 인증 과정에서 자격 증명을 관리 하는 각 구성 요소에 설명 합니다.

**모든 시스템에 대 한 구성 요소 인증**

|구성 요소|설명|
|-------|--------|
|사용자의 로그온|Winlogon.exe 실행 파일 관리 안전 하 게 사용자의 상호 작용입니다. Winlogon 서비스에 의해 수집 된 사용자 작업 보안 데스크톱 (로그온 UI) Secur32.dll 통해 로컬 보안 기관을 (LSA)를 자격 증명을 전달 하 여 Windows 운영 체제에 대 한 로그온 프로세스를 시작 합니다.|
|응용 프로그램에 로그온|응용 프로그램 또는 대화형 로그온 필요 하지 않은 서비스 로그온 합니다. 대부분의 프로세스 Ksecdd.sys를 사용 하 여 커널 모드에서 실행 하는 프로세스를 시작 시 시작 반면 Secur32.dll를 사용 하 여 사용자 모드에서 실행 하는 사용자가 시작 됩니다.<br /><br />사용자 모드 및 커널 모드에 대 한 자세한 내용은이 항목의 응용 프로그램 및 사용자 모드 또는 서비스 및 커널 모드를 표시 합니다.|
|Secur32.dll|인증 프로세스의 기본을 이루며 하 여 여러 인증 공급자|
|Lsasrv.dll|LSA 서버 서비스 보안 정책이 적용 하 LSA에 대 한 보안 패키지 매니저 역할도 합니다. LSA는 프로토콜 성공 하는 것을 확인 한 후 NTLM 또는 Kerberos 프로토콜을 선택 하는 협상 함수 포함 되어 있습니다.|
|보안 지원 공급자|공급자 하나 이상의 인증 프로토콜을 개별적으로 호출할 수를 설정 합니다. 각 Windows 운영 체제 버전 공급자의 기본 설정 변경 하 고 사용자 정의 공급자로 작성할 수 있습니다.|
|Netlogon.dll|네트워크 로그온 서비스를 수행 하는 서비스는 다음과 같습니다.<br /><br />-도메인 컨트롤러에 (하지 혼동 Schannel)에 컴퓨터의 보안을 채널을 유지 합니다.<br />-도메인 컨트롤러에 보안 채널을 통해 사용자의 자격 증명을 전달 하 고 도메인 보안 Sid (식별자) 및 사용자에 대 한 권한을 사용자를 반환 합니다.<br />-게시 리소스 레코드 서비스에는 시스템 DNS (도메인 이름)를 사용 하 여 DNS 이름을 도메인 컨트롤러의 IP (인터넷 프로토콜) 주소를 확인 합니다.<br />-주 도메인 컨트롤러 (Pdc) 및 백업 Bdc (도메인 컨트롤러)을 동기화 원격 프로시저 호출, (RPC)에 따라 복제 프로토콜을 구현 합니다.|
|Samsrv.dll|보안 계정을 관리자 (삼로), 보안 로컬 계정에 저장 하는 로컬에 저장 된 정책을 적용을 Api를 지원 합니다.|
|레지스트리|레지스트리 삼로 데이터베이스, 로컬 보안 정책 설정, 기본값 보안 및 계정 정보만 시스템에 액세스할 수 있는의 복사본을 포함 합니다.|

이 항목에서는 다음 섹션.

-   [사용자의 로그온 위한 자격 증명 입력](#BKMK_CrentialInputForUserLogon)

-   [응용 프로그램 및 서비스 로그온 자격 증명 입력](#BKMK_CredentialInputForApplicationAndServiceLogon)

-   [로컬 보안 기관](#BKMK_LSA)

-   [캐시 된 자격 증명 하 고 유효성 검사](#BKMK_CachedCredentialsAndValidation)

-   [자격 증명 저장 및 유효성 검사](#BKMK_CredentialStorageAndValidation)

-   [보안 계정을 관리자 데이터베이스](#BKMK_SAM)

-   [로컬 도메인 하 고 신뢰할 수 있는 도메인](#BKMK_LocalDomainsAndTrustedDomains)

-   [Windows 인증 인증서](#BKMK_CertificatesInWindowsAuthentication)

## <a name="BKMK_CrentialInputForUserLogon"></a>사용자의 로그온 위한 자격 증명 입력
Windows Server 2008 및 Windows Vista의 그래픽 Id 및 인증 (GINA) 건축물과 로그온 타일을 사용 하 여 다른 로그온 유형을 열거 가능 자격 증명 공급자 모델을으로 바뀌었습니다. 두 모델은 다음과 같습니다.

**그래픽 확인 및 인증 건축물**

그래픽 확인 및 인증 (GINA) 건축물과 Windows Server 2003, Windows 2000 Server, Windows XP 및 Windows 2000 Professional 운영 체제에 적용 됩니다. 이러한 시스템 모든 대화형 로그온 세션 Winlogon 서비스의 별도 인스턴스를 만듭니다. GINA 아키텍처 Winlogon에서 사용 하는 프로세스 공간으로 로드 됩니다, 그리고 수신 하 고 자격 증명을 처리 하 고는 호출 하 LSALogonUser 통해 인증 인터페이스 합니다.

대화형 로그온에 대 한 Winlogon 인스턴스 0 세션에서 실행 됩니다. 세션 0 호스트 시스템 서비스 및 LSA 로컬 보안 기관을 () 프로세스를 비롯 한 기타 중요 한 프로세스입니다.

다음 그림 Windows Server 2003, Windows 2000 Server, Windows XP 및 Windows 2000 Professional Microsoft 자격 증명 프로세스를 보여 줍니다.

![Windows Server 2003, Windows 2000 Server, Windows XP 및 Windows 2000 Professional Microsoft 자격 증명 프로세스를 보여 주는 다이어그램](../media/credentials-processes-in-windows-authentication/AuthN_GINA_Architecture.gif)

**자격 증명 공급자 구조**

자격 증명 공급자 아키텍처에 지정 된 이러한 버전에 적용 됩니다는 **에 적용 됩니다.** 이 항목의 시작 부분에 목록입니다. 이러한 시스템 자격 증명 입력된 아키텍처 공급자 자격 증명을 사용 하 여 extensible 디자인을 변경 합니다. These providers are represented by the different logon tiles on the secure desktop that permit any number of logon scenarios - different accounts for the same user and different authentication methods, such as password, smart card, and biometrics.

자격 증명 공급자 건축물과 섞여 Winlogon 항상 시작 로그온 UI 안전한 주의 시퀀스 이벤트를 수신 되 면 합니다. 로그온 UI 쿼리 각 자격 증명 공급자는 공급자가 열거할 구성 되어 자격 증명 다른 유형의 수 있습니다. 자격 증명 공급자는 이러한 타일 중 하나를 기본 디바이스로 지정할 수가 있습니다. 모든 공급자가 해당 타일 열거 후 로그온 UI는 사용자에 게 표시 됩니다. 타일 자격 증명을 제공할 수와 상호 작용할 합니다. 인증에 대 한 이러한 자격 증명을 전송 하는 UI 로그온 합니다.

자격 증명 공급자는 집행 메커니즘 하지 않습니다. 수집 하 고 해당 자격 증명 serialize 사용 됩니다. 로컬 보안 기관 및 인증 패키지 보안을 강화 합니다.

자격 증명 공급자 컴퓨터에서 등록 되며 다음 작업을 수행 합니다.

-   인증을 위해 필요한 자격 증명 정보에 설명 합니다.

-   통신 및 논리 외부 인증 기관으로 처리 합니다.

-   패키지 자격 증명을 대화형 및 네트워크 로그온 합니다.

패키지 자격 증명을 대화형 네트워크 로그온 serialization 하는 과정을 포함 합니다. 자격 증명 직렬화 하 여 여러 로그온 타일 로그온 UI에 표시 될 수 있습니다. Therefore, your organization can control the logon display such as users, target systems for logon, pre-logon access to the network and workstation lock/unlock policies - through the use of customized credential providers. 동일한 컴퓨터에 여러 자격 증명 공급자 존재할 수 있습니다.

표준 자격 증명 공급자로 또는 로그온 액세스 사전 공급자로 (SSO) 공급자 로그온 단일 개발할 수 있습니다.

각 Windows 버전에 포함 되어 기본 자격 증명 공급자 기본 사전-로그온 액세스 공급자 (PLAP) SSO 공급자 라고도 합니다. SSO 공급자는 사용자가 로컬 컴퓨터에 로그온 하기 전에 네트워크에 연결 하도록 허용 합니다. 이 공급자를 구현 하는 경우 공급자 로그온 UI의 타일이 열거할지 않습니다.

SSO 공급자는 다음과 같은 상황에서 사용할 수 하기 위한 것입니다.

-   **네트워크 컴퓨터 및 인증 로그온 다양 한 자격 증명 공급자에서 처리 됩니다.** 차이이 시나리오는 다음과 같습니다.

    -   사용자 (VPN) 가상 개인 네트워크에 연결 등 네트워크에 연결 하는 옵션이 컴퓨터에 로그온 하기 전에 되었지만이 연결 필요가 없습니다.

    -   로컬 컴퓨터에서 대화형 인증 하는 동안 사용 되는 정보를 검색 네트워크 인증 필요 합니다.

    -   여러 네트워크 인증은 시나리오 중 하나 다른 옵니다. 예를 들어, 사용자 인터넷 서비스 공급자 ISP ()를 인증 인증 VPN을 하 고 사용자 계정 자격 증명 로그온 할 로컬로 사용 합니다.

    -   캐시 된 자격 증명을 사용할 수 있으며 VPN 통해 액세스 서비스 원격 연결을 사용자 인증 로컬 로그온 하기 전에 필요지 않습니다.

    -   로컬 계정이 도메인에 가입 컴퓨터에 설치 되지 않는 이자 도메인 대화형 로그온을 완료 하기 전에 VPN 연결을 통해 액세스 서비스 원격 연결을 설정 해야 합니다.

-   **네트워크 컴퓨터 및 인증 로그온 같은 자격 증명 공급자에서 처리 됩니다.** 이 경우에는 사용자가 컴퓨터에 로그온 하기 전에 네트워크에 연결 하는 데 필요한 합니다.

**로그온 타일 열거형**

자격 증명 공급자는 다음과 같은 경우에 로그온 타일 열거 다음과 같습니다.

-   에 지정 된 운영 체제에 대 한는 **에 적용** 이 항목의 시작 부분에 목록입니다.

-   자격 증명 공급자 열거 타일 워크스테이션 로그온 합니다. 자격 증명 공급자는 일반적으로 인증 로컬 보안 기관을를 위한 자격 증명을 serialize합니다. 이 프로세스 대상 시스템 각 사용자의 각 사용자에 대 한 특정 및 특정 타일을 표시합니다.

-   로그온 및 인증 아키텍처 자격 증명 공급자가 열거 타일 워크스테이션 잠금 해제를 사용 하 여 사용자 수 있습니다. 일반적으로 로그인 한 현재 사용자 기본 타일 이지만 개 이상의 사용자가 로그온 수많은 타일이 표시 됩니다.

-   자격 증명 공급자 열거 타일 암호나 PIN 같이 기타 개인 정보를 변경 하려면 사용자 요청에 응답 합니다. 일반적으로 로그인 한 현재 사용자가 기본 타일; 둘 이상의 사용자가 로그온 수많은 타일이 표시 됩니다.

-   자격 증명 공급자 열거 연속된 자격 증명을 인증 원격 컴퓨터에 사용할 수에 따라 타일 합니다. 자격 증명 UI 로그온 UI를 잠금 해제 워크스테이션 또는 비밀 번호 변경 공급자의 같은 인스턴스를 사용 하지 않습니다. 그러므로 자격 증명 UI의 인스턴스 간에 공급자의 상태 정보를 관리할 수 수 없습니다. 이 구조 하나의 타일에 대 한 원격 컴퓨터 로그인 할 때마다 자격 증명 올바르게 연속 된 것으로 간주 됩니다. 이 시나리오에서 컨트롤 UAC (사용자 계정), 컴퓨터의 작동 영향을 줄 수 있거나 컴퓨터의 다른 사용자에 게 영향을 주는 설정을 변경할 수 있는 작업을 허용 하기 전에 사용자에 게 사용 권한을 또는 관리자가 암호를 입력 하도록 하 여 컴퓨터의 무단된 변경을 방지 하는 데 도움이 되는 또한 합니다.

다음 그림 자격 증명 프로세스에 지정 된 운영 체제에 대 한는 **에 적용 됩니다.** 이 항목의 시작 부분에 목록입니다.

![지정 된 운영 체제에 대 한 자격 증명 프로세스를 보여 주는 다이어그램은 * *에 적용 됩니다. * * 목록이이 항목의 시작 부분에](../media/credentials-processes-in-windows-authentication/AuthN_CredMan_CredProv.gif)

## <a name="BKMK_CredentialInputForApplicationAndServiceLogon"></a>응용 프로그램 및 서비스 로그온 자격 증명 입력
Windows 인증 응용 프로그램 또는 서비스가 사용자의 상호 작용 필요 하지 않은 자격 증명을 관리 하도록 설계 되었습니다. 사용자 모드에서 응용 프로그램은 어떤 시스템 리소스에 액세스할 수, 서비스 시스템 메모리 및 외부 디바이스에 대 한 액세스 무제한 있을 수 동안 측면에서 제한 됩니다.

시스템 서비스와 전송 수준 응용 프로그램을 통해 보안 지원 공급자 인터페이스 (SSPI)는 시스템에서 사용할 수 있는 보안 패키지 열거 패키지를 선택 하 고 해당 패키지를 사용 하 여 인증된 된 연결을 얻을 수에 대 한 기능을 제공 하는 Windows의는 보안 지원 SSP 액세스 합니다.

클라이언트/서버에 연결 인증 된 경우 다음과 같습니다.

-   응용 프로그램 연결 클라이언트 측에 SSPI 기능을 사용 하 여 자격 증명 서버에 전송 `InitializeSecurityContext (General)`합니다.

-   서버 쪽 연결의 응용 프로그램 SSPI 기능을 사용 하 여 응답 `AcceptSecurityContext (General)`합니다.

-   SSPI 기능 `InitializeSecurityContext (General)` 및 `AcceptSecurityContext (General)` 성공 또는 인증 실패할에 필요한 인증 메시지를 모두가 교환 될 때까지 반복 합니다.

-   연결이 인증 된 후 서버에 LSA 클라이언트에서 정보를 사용 하 여 액세스 토큰 포함 된 보안 컨텍스트 빌드입니다.

-   서버 SSPI 기능 호출할 수 `ImpersonateSecurityContext` 액세스 토큰 서비스에 대 한 가장 스레드를 연결 합니다.

**응용 프로그램 및 사용자 모드**

사용자 모드 Windows에서 두 시스템에 적절 한 커널 모드 드라이버 I/O 요청을 전달할 수 이루어져: 다양 한 종류의 운영 체제에 대 한 작성 된 응용 프로그램을 실행 하는 환경 시스템과 작동 하는 환경 시스템 시스템 특정 기능 가장 중요 한 시스템을 합니다.

가장 중요 한 시스템 환경 시스템 운영 system'specific 기능을 관리 하 고 보안 시스템 프로세스가 (LSA), 워크스테이션 서비스 서버 서비스도 구성 됩니다. 보안 시스템 프로세스가 보안 토큰 다루는, 부여 또는 거부 리소스 사용 권한을에 따라 사용자 계정에 액세스할 수 있는 권한이, 로그온 요청을 처리 하 고 로그온 인증을 시작 및 운영 체제 필요한 감사 하는 시스템 리소스를 확인 합니다.

응용 프로그램의 로컬 (시스템) 보안 컨텍스트에서 비롯 한 모든 사용자와 응용 프로그램 실행할 수 있는 사용자 모드에서 실행할 수 있습니다. 응용 프로그램 실행할 수도 커널 모드에서 응용 프로그램의 로컬 (시스템) 보안 컨텍스트에서 실행할 수 있는 합니다.

SSPI 인증과 메시지 무결성 메시지 개인 정보 보호에 대 한 통합된 보안 서비스를 얻기 위해 사용 하는 API Secur32.dll 모듈을 통해 제공 됩니다. 응용 프로그램 프로토콜 사이의 보안 프로토콜 추상화 계층을 제공합니다. 다른 응용 프로그램을 식별 또는 인증 사용자 및 네트워크 이동할 때 데이터를 암호화 하는 여러 가지 다양 한 방법 요구, 하므로 SSPI 동적 연결 (Dll 라이브러리) 포함 다른 인증 암호화 기능에 액세스할 수 있는 방법을 제공 합니다. 이러한 Dll 보안 지원 공급자 (규칙이) 라고 합니다.

관리 서비스 계정 및 가상 계정에서 Windows Server 2008 R2 소개 된 및 Microsoft SQL Server 정보 IIS (인터넷 서비스)를 자신의 도메인 계정 격리 등의 중요 한 응용 프로그램을 제공 하기 위해 Windows 7에는 관리자에 대 한 필요성을 수동으로 제거 하는 동안 관리 (SPN) 서비스 사용자 이름 및 해당이 계정에 대 한 자격 증명 합니다. For more information about these features and their role in authentication, see [Managed Service Accounts Documentation for Windows 7 and Windows Server 2008 R2](https://technet.microsoft.com/library/ff641731(v=ws.10).aspx) and [Group Managed Service Accounts Overview](../group-managed-service-accounts/group-managed-service-accounts-overview.md).

**서비스 및 커널 모드**

대부분의 Windows 응용 프로그램을 시작 하는 사용자의 보안 컨텍스트를 실행 하는 경우에 서비스의 그렇지 않습니다. 사용자가 컴퓨터를 시작할 때와 같은 네트워크 및 인쇄 서비스 많은 Windows 서비스 서비스 컨트롤러에서 시작 됩니다. 이러한 서비스 로컬 서비스 또는 시스템 지역으로 실행 될 수 있습니다와 계속 마지막는 사용자가 로그 오프 실행 될 수 있습니다.

> [!NOTE]
> 서비스는 일반적으로 로컬 시스템 (시스템), 네트워크 서비스 로컬 서비스 이라고 보안 컨텍스트에서 실행 합니다.  Windows Server 2008 R2 도메인 사용자가 관리 서비스 계정에서 실행 하는 서비스를 도입 했습니다.

서비스를 시작 하기 전에 서비스 컨트롤러의 서비스에 대 한 지정 되 고 다음 LSA로 인증을 위한 해당 서비스의 자격 증명을 제공 하는 계정을 사용 하 여 로그온 합니다. Windows 서비스 서비스 컨트롤러 관리자 서비스를 제어 하는 데 사용할 수 있는 프로그래밍 인터페이스를 구현 합니다. Windows 서비스는 시스템 시작 될 때 또는 수동으로 서비스 컨트롤을 자동으로 시작할 수 있습니다. 예를 들어, Windows 클라이언트 컴퓨터가 도메인에 가입 messenger 서비스 컴퓨터에서 도메인 컨트롤러에 연결 고 보안 채널 것을 엽니다. 인증된 된 연결을 얻기 위해 서비스 원격 컴퓨터의 LSA 로컬 보안 기관을 () 신뢰 하는 자격 증명이 있어야 합니다. 네트워크의 다른 컴퓨터와 통신할 때도 삽 니다 로컬 시스템 및 네트워크 서비스의 보안 컨텍스트에서 실행 되는 다른 모든 서비스 LSA 로컬 컴퓨터 도메인 계정에 대 한 자격 증명을 사용 합니다. 로컬 컴퓨터에서 서비스 자격 증명을 LSA 제공 필요가 없습니다 있으므로 시스템으로 실행 됩니다.

Ksecdd.sys 파일을 관리 하 고 이러한 자격 증명을 암호화 하 고 로컬 프로시저 호출 LSA에 사용 하 여 합니다. 파일 형식 (드라이버) DRV 이며 커널 모드 보안 지원 공급자 (SSP)로, 이러한 버전에 지정 된 알려진는 **에 적용 됩니다.** 이 항목의 시작 부분에 목록에서 FIPS 1 호환 140 2 수준입니다.

커널 모드는 컴퓨터의 하드웨어와 시스템 리소스에 대 한 전체 액세스 합니다. 커널 모드 중지 사용자 모드 서비스와 응용 프로그램에 대 한 액세스 없는 해야 하는 운영 체제의 주요 영역에 액세스 하지 못하도록 합니다.

## <a name="BKMK_LSA"></a>로컬 보안 기관
로컬 보안 기관을 (LSA)를 인증 된 로컬 컴퓨터에 사용자가 로그 보호 되는 시스템 프로세스입니다. 또한 LSA (이러한 측면 집합적으로 이라고 로컬 보안 정책이) 하는 컴퓨터에서 로컬 보안의 모든 측면에 대 한 정보를 유지 하 고 이름 및 보안 Sid (식별자) 간의 번역에 대 한 다양 한 서비스를 제공 합니다. 보안 정책이 및 컴퓨터 시스템에 적용 되는 계정 보안 시스템 프로세스가 LSASS 로컬 보안 기관을 서버 서비스 ()는 추적 합니다.

LSA는 사용자의 계정 발급 한 다음 두 가지 기관과 중에 따라 사용자의 신원을 확인 합니다.

-   **로컬 보안 기관을 합니다.** LSA 동일한 컴퓨터에 있는 보안 계정을 관리자 (삼로) 데이터베이스를 검사 하 여 사용자 정보를 확인할 수 있습니다. 모든 워크스테이션 또는 멤버 서버 로컬 사용자 계정 및 로컬 그룹에 대 한 정보를 저장할 수 있습니다. 하지만 이러한 계정은 해당 워크스테이션 또는 컴퓨터에 액세스 하기 위해 사용할 수 있습니다.

-   **로컬 도메인에 대 한 또는 신뢰할 수 있는 도메인에 대 한 보안 기관을 합니다.** LSA는 계정을 발급 한 entity 및 요청 확인 계정을 유효 하 고 요청 예금주에서 발생 한에 접속 합니다.

로컬 보안 기관을 서비스 LSASS (하위 시스템) 자격 증명을 활성 Windows 세션 있는 사용자를 대신 하 여 메모리에 저장 합니다. 저장 된 자격 증명 원활 하 게 원격 된 각 서비스에 대 한 자격 증명을 다시 입력 하지 않고 사이트, SharePoint, Exchange Server 사서함, 파일 공유 등 네트워크 리소스에 액세스할 수 있도록 합니다.

LSASS 포함 하 여 여러 양식에서 자격 증명을 저장할 수 있습니다.

-   해독된 일반 텍스트

-   Kerberos 티켓 (티켓 부여 티켓 (Tgt) 서비스 티켓)

-   NT 해시

-   LAN LM (Manager) hash

사용자는 스마트 카드를 사용 하 여가 Windows에 로그온, LSASS 일반 암호를 저장 하지는 않습니다 있지만 해당 NT 해시 값 계정과 스마트 카드에 대 한 PIN 일반 텍스트에 대 한이 폴더에 저장 합니다. 계정 특성 대화형 로그온 해야 하는 스마트 카드에 대 한 사용 하도록 설정한 경우 원래 암호 해시 대신 계정에 대해 임의 NT 해시 값을 자동으로 생성 됩니다. 암호 해시 특성 설정 하는 경우 자동으로 생성 되는 변경 되지 않습니다.

사용자가 Windows 기반 해시 LAN LM (Manager)과 호환 되는 암호를 사용 하 여 컴퓨터에 로그온이 인증자에에서 있는 경우 메모리 합니다.

자격 증명을 수행 하는 공급자는 사용 하지 않도록 설정 하는 경우 일반 자격 증명 메모리에 저장소를 비활성화할 수 없습니다.

저장 된 자격 증명 직접 연결 된 후 마지막 시작 되어 있는 로컬 보안 기관을 서비스 LSASS (하위 시스템) 로그온 세션 다시 시작 하 고 닫히지 되었습니다. 예를 들어, 사용자가 다음 중 하나를 수행 LSA 세션 저장 된 LSA 자격 증명을 생성 됩니다.

-   로컬 세션 또는 컴퓨터에서 원격 데스크톱 프로토콜 RDP () 세션 로그온

-   사용 하 여 작업을 자동으로 실행는 **RunAs** 옵션

-   컴퓨터에서 Windows 서비스가 활성화 실행

-   예약 된 작업이 나 일괄 작업을 실행

-   로컬 컴퓨터에서 원격 관리 도구를 사용 하 여 작업을 실행

어떤 경우에는 비밀 가지 시스템 계정 프로세스에만 액세스할 수 있는 데이터 LSA 비밀 하드 디스크 드라이브에 저장 됩니다. 자격 증명을 다시 부팅 한 후 유지 해야 하는 이러한 비밀 중 일부는 하 고 암호화 된 형태로 하드 디스크 드라이브에 저장 됩니다. LSA 비밀으로 저장 된 자격 증명 포함 될 수 있습니다.

-   컴퓨터의 Active Directory Domain Services (AD DS) 계정에 대 한 암호

-   컴퓨터에서 구성 된 Windows 서비스에 대 한 계정 암호

-   예약 작업 구성 된 계정 암호

-   웹 사이트 및 응용 프로그램 풀 IIS 계정 암호

-   Microsoft 계정에 대 한 암호

클라이언트 운영 체제에 Windows 8.1 도입 LSA 읽기 메모리를 방지 하 고 프로세스 보호 되지 않은 삽입 코드에 추가 보호를 제공 합니다. 이 보호 LSA 저장 하 고 관리 자격에 대 한 보안을 강화 합니다.

이러한 추가 보호에 대 한 자세한 내용은 참조 [추가 LSA 보호 구성](../credentials-protection-and-management/configuring-additional-lsa-protection.md)합니다.

## <a name="BKMK_CachedCredentialsAndValidation"></a>캐시 된 자격 증명 하 고 유효성 검사
로그온 시 자격 증명 표시 유효성 검사 장치 사용합니다. 그러나 컴퓨터가 도메인 컨트롤러에서 끊어지면 사용자는 도메인 자격 증명을 제공 하는 경우 Windows 유효성 검사 장치에 캐시 된 자격 증명 하는 과정을 사용 합니다.

사용자가 도메인에 로그온 될 때마다 Windows 제공한 자격 증명 캐시을 운영 체제의 레지스트리에 보안 벌에 저장 합니다.

캐시 된 자격 증명으로 사용자의 로그온 할 수 도메인 구성원에 도메인 컨트롤러 그 도메인에 연결 하지 않고.


## <a name="BKMK_CredentialStorageAndValidation"></a>자격 증명 저장 및 유효성 검사
언제 든 다른 리소스에 대 한 액세스 한 집합 자격 증명을 사용 하는 것이 좋습니다 있는 것은 아닙니다. 예를 들어, 관리자가 것이 좋습니다 사용 하 여 사용자 자격 증명 아니라 관리 원격 서버에 액세스 합니다. 마찬가지로 사용자가 은행 계좌 등 외부 리소스에 액세스 하는 경우 주기도 사용할 수 도메인 자격 증명 것과 다른 자격 증명 합니다. 다음 섹션 자격 증명 관리 간에 최신 버전의 Windows 운영 체제 및 Windows Vista 및 Windows XP 운영 체제의에서 차이 설명 합니다.

### <a name="remote-logon-credential-processes"></a>원격 로그인 자격 증명 프로세스
원격 데스크톱 프로토콜 (RDP)는 Windows 8에서 원격 데스크톱 클라이언트를 사용 하 여 원격 컴퓨터에 연결 하는 사용자의 자격 증명을 관리 합니다. 일반 형태로 자격 증명 대상 호스트 되 호스트 인증 프로세스를 수행 하려고 하 고, 사용자 허용된 리소스에 성공 하면 연결 전송 됩니다. RDP 클라이언트에서 자격 증명을 저장 하지 않습니다 하지만 사용자의 도메인 자격 증명 LSASS에 저장 됩니다.

Windows Server 2012 R2 및 Windows 8.1 도입 제한 관리자 모드 원격 로그온 시나리오를 추가로 보안을 제공 합니다. 이 모드의 원격 데스크톱을 네트워크 로그온 과제-응답 NT 단방향 기능 (NTOWF)으로 수행 하거나 Kerberos 서비스 티켓 원격 호스트 인증할 때 사용 하 여 클라이언트 응용 프로그램을 하면 됩니다. 관리자가 인증 된 후 관리자 없는 해당 계정 자격 증명 LSASS 원격 호스트 제공 되지 않아 합니다. 대신, 관리자 세션에 대 한 컴퓨터 계정 자격 증명을 갖습니다. 관리자 자격 증명은 컴퓨터 계정으로 작업을 수행 하도록 원격 호스트로 돌아갑니다 제공 되지 않습니다. 리소스 컴퓨터 계정으로 제한도 되며 관리자 자신의 계정으로 리소스에 액세스할 수 없습니다.

### <a name="automatic-restart-sign-on-credential-process"></a>자동으로 다시 시작의 로그인 자격 증명 프로세스
사용자가 Windows 8.1 디바이스에 로그인 하는 경우 LSA 사용자 자격 증명에 액세스할 수 LSASS.exe 암호화 메모리에 저장 합니다. Windows 업데이트는 자동으로 다시 시작 사용자 존재 여부를 않고도 시작 하는 경우이 자격 증명 로그온 사용자에 대 한 구성 하는 데 사용 됩니다.

다시 시작에서 로그온 메커니즘을 통해 사용자가 자동으로 로그인 한 다음 컴퓨터가 또한 잠겨 하면 사용자 세션을 보호 하기 위해 합니다. 자격 증명 관리 LSA 하면 됩니다 반면 Winlogon을 통해 잠금 시작 됩니다. 자동으로 로그인 하 고 본체에서 사용자의 세션 잠금으로 사용자의 잠금 화면 응용 프로그램을 다시 시작 하 고 사용할 수입니다.

ARSO에 대 한 자세한 내용은 참조 [Winlogon 자동 다시 시작 Sign-on & #40; ARSO & #41; ](winlogon-automatic-restart-sign-on-arso.md).

### <a name="stored-user-names-and-passwords-in-windows-vista-and-windows-xp"></a>저장 된 사용자 이름 및 암호 Windows Vista 및 Windows XP
Windows Server 2008, Windows Server 2003, Windows Vista 및 Windows XP **저장 된 사용자 이름 및 암호** 제어판에서 간단 하 게 관리 및 여러 가지 Windows Live 자격 (현재 Microsoft 계정 이라고 함) 스마트 카드와 함께 사용 되는 X.509 인증서 등 로그온 자격 증명을 사용 합니다. The credentials - part of the user's profile - are stored until needed. 이 작업은 하나의 암호 손상 되는 경우 손상 되지 않는지 모든 보안 수 있도록 하 여 리소스 별로 보안을 강화할 수 있습니다.

사용자에 로그인 하 고 서버에 공유와 같은 추가 암호로 보호 된 리소스에 액세스 하려고 후 하 고 사용자의 기본 로그온 자격 증명에 액세스 하는 데 충분 하지 않을 경우 **저장 된 사용자 이름 및 암호** 쿼리 됩니다. 로그인 정보를 다른 자격 증명에 저장 된 경우 **저장 된 사용자 이름 및 암호**, 해당 자격이 증명에 액세스 하는 데 사용 됩니다. 그렇지 않은 경우 사용자 다시 사용 하거나 나중에 로그온 세션 이후 세션 중에 저장 될 수 있는 새로운 자격 증명을 입력할 하 라는 메시지가 표시 됩니다.

다음과 같은 제한 사항이 적용 됩니다.

-   하는 경우 **저장 된 사용자 이름 및 암호** 특정 리소스 리소스에 대 한 액세스 거부에 대해 잘못 되거나 잘못 된 자격 증명을 포함 및 **저장 된 사용자 이름 및 암호** 대화 상자가 나타나지 않습니다.

-   **사용자 이름 및 암호 저장** NTLM Kerberos 프로토콜에만 자격 증명을 저장 Microsoft 계정 (이전의 Windows Live ID) 및 소켓 SSL (Secure Layer) 인증 합니다. 일부 버전의 Internet Explorer를 기본 인증에 대 한 자신의 캐시를 유지합니다.

이러한 자격 증명 되는 암호화 된 사용자의 로컬 프로필 \Documents 및 사용자 Data\Microsoft\Credentials 디렉터리에 포함 됩니다. 결과적으로, 해당 자격이 증명 사용자의 네트워크 정책 로밍 사용자 프로필을 지원 하는 경우 사용자와 로밍 수 있습니다. 그러나 경우 사용자가 복사본 **저장 된 사용자 이름 및 암호** 두 컴퓨터와 변경이이 컴퓨터에 리소스와 관련 된 자격 증명 변경 전파 되지 않으므로 **저장 된 사용자 이름 및 암호** 다른 컴퓨터의 합니다.

### <a name="windows-vault-and-credential-manager"></a>관리자 자격 증명 하 고 Windows 자격
관리자 자격 증명을 저장 하 고 사용자 이름 및 암호 관리 제어판 기능으로 Windows Server 2008 R2 및 Windows 7에서 도입 되었습니다. 자격 증명 관리자 자격 증명 다른 시스템 및 웹 사이트와 관련 Windows 안전한 자격에 저장할 수 있도록 합니다. 일부 버전의 Internet Explorer 웹 사이트를 인증에 대해이 기능을 사용 합니다.

관리자 자격 증명을 사용 하 여 자격 증명 관리 로컬 컴퓨터에 사용자가 제어 됩니다. 사용자가 저장 하 고 편리 하 게 이러한 리소스에에 로그인 할 때 Windows 응용 프로그램은 지원 되는 브라우저에서 자격 증명을 저장할 수 있습니다. 사용자의 프로필 컴퓨터에서 자격 증명 특별 한 암호화 된 폴더에 저장 됩니다. 앱, 웹 브라우저 등 (자격 증명 관리자 Api)를 사용 하 여이 기능을 지 원하는 응용 프로그램 로그온 과정 다른 컴퓨터 및 웹 사이트에 올바른 자격 증명을 제공할 수 있습니다.

표시 되 면 웹 사이트, 응용 프로그램 또는 다른 컴퓨터 요청 인증 NTLM 또는 Kerberos 프로토콜을 통해 대화 상자에서 선택 하 고 **업데이트 기본 자격 증명** 또는 **암호 저장** 확인란을 선택 합니다. 관리자 자격 증명 Api를 지 원하는 응용 프로그램에서이 대화 상자에 사용자가 로컬 자격 증명을 저장할 수 있는 생성 됩니다. 사용자가 선택 하는 경우는 **암호 저장** 확인란을 자격 증명 관리자가 사용자의 사용자 이름, 암호 및 사용 되는 인증 서비스에 대 한 관련된 정보의 추적 합니다.

다음에 서비스를 이용 자격 증명 관리자 Windows 자격에 저장 된 자격 증명을 자동으로 제공 합니다. 허용 되지 않습니다 사용자 올바른 액세스 정보에 대 한 메시지가 나타납니다. 새 자격 증명으로 액세스를 허가한 자격 증명 관리자 이전 자격 증명을 새로운 덮어씁니다 하 고 Windows 자격 새로운 자격 증명을 저장 합니다.

## <a name="BKMK_SAM"></a>보안 계정을 관리자 데이터베이스
보안 계정을 관리자 (삼로)는 로컬 사용자 계정 및 그룹 저장 하는 데이터베이스 합니다. 이 모든 Windows 운영 체제입니다. 그러나 컴퓨터가 도메인에 가입, Active Directory Active Directory 하는 도메인의 도메인 계정을 관리 합니다.

예를 들어, Windows 운영 체제를 실행 하는 클라이언트 컴퓨터 로그온 한 휴먼 사용자가 때도 도메인 컨트롤러와 통신 하 여 네트워크 도메인에 참여 합니다. 통신을 시작 하려면 컴퓨터 도메인에 있는 현재 계정이 있어야 합니다. 컴퓨터의 통신을 받기 전에 LSA 도메인 컨트롤러에서 컴퓨터의 id를 인증 하 고 인간의 보안 사용자와 마찬가지로 컴퓨터의 보안 컨텍스트를 생성 합니다. 이 보안 컨텍스트에서 특정 컴퓨터 사용자, 서비스 또는 네트워크에서 컴퓨터 id 및 사용자 또는 서비스의 기능이 정의합니다. For example, the access token contained within the security context defines the resources (such as a file share or printer) that can be accessed and the actions (such as Read, Write, or Modify) that can be performed by that principal - a user, computer, or service on that resource.

사용자 또는 컴퓨터의 보안 컨텍스트 한 컴퓨터에서 다른 사용자가 서버 또는 사용자의 기본 워크스테이션 이외의 워크스테이션 등 달라질 수 있습니다. 관리자는 사용자의 권한과 수정 하는 때와 같은 다른도 세션에서 달라질 수 있습니다. 또한 사용자 또는 컴퓨터 작동 하는 경우 네트워크 또는 Active Directory 도메인의 일환으로, 독립 실행형 별로 보안 컨텍스트가 일반적으로 다른 되었습니다.

## <a name="BKMK_LocalDomainsAndTrustedDomains"></a>로컬 도메인 하 고 신뢰할 수 있는 도메인
신뢰 두 도메인에 있는 경우 각 도메인 인증 메커니즘 다른 도메인에서 제공한 것임 인증의 유효성을 검사에 의존 합니다. 신뢰 하 도움말 수신 승인 요청을 확인 하 여 제어 리소스 액세스를 공유 리소스 도메인 (신뢰 도메인)에 제공 하기 위해 신뢰할 수 있는 권한을 (신뢰할 수 있는 도메인)에서 제공 합니다. 이렇게에서만 수 있게 해 주는 다리 도메인 간에 요청 여행 인증의 유효성을 검사 신뢰 작동 합니다.

특정 신뢰 전달 인증 요청 어떻게 구성에 따라 다릅니다. 신뢰 관계 각 도메인 다른 도메인 리소스에에서 액세스 하 여 단방향 신뢰할 수 있는 도메인 신뢰할 도메인 리소스에에서 액세스 하 여 또는 양방향 될 수 있습니다. 신뢰도 있는 비전이 두 신뢰 파트너 도메인 간만 존재를 신뢰 하는 경우에서 또는 전이적 파트너 중 하나 신뢰 하는 다른 도메인 신뢰를 자동으로 확장 경우 합니다.

인증에 관한 도메인 및 숲 보안 관계에 대 한 내용은 [위임 인증과 신뢰 관계](https://technet.microsoft.com/library/dn169022.aspx)합니다.

## <a name="BKMK_CertificatesInWindowsAuthentication"></a>Windows 인증 인증서
공개 키 인프라 (PKI) 소프트웨어, 암호화 기술을, 프로세스 및 커뮤니케이션 및 비즈니스 거래 보호를 위해 사용 하는 서비스의 조합입니다. 통신 및 비즈니스 거래 보안을 유지 하는 기능 pki 인증 된 사용자가 신뢰할 수 있는 리소스와 디지털 인증서를 교환 기반으로 합니다.

디지털 인증서 전자 문서에 속해 entity에서 발급 되었습니다 엔터티, 고유한 일련 번호를 또는 기타 고유 id, 발급 만료 날짜 및 디지털 지문에 대 한 정보를 포함 하는 합니다.

인증 원격 호스트 신뢰할 수 있는지 확인 하는 과정입니다. 해당 신뢰성을 설정 하려면 원격 호스트 적합 한 인증 인증서가 제공 해야 합니다.

원격 호스트 (캐나다), 인증 기관에서는 인증서를 얻는 신뢰성을 설정 합니다. 캐나다의 수를 포함할 신뢰 체인 만들어 높은 기관의 인증 합니다. 인증서가 신뢰할 수 있는지 여부를 확인 하려면 응용 프로그램의 캐나다 루트 id를 확인 하 고 신뢰할 수 있는지 확인 해야 합니다.

마찬가지로, 원격 호스트 또는 로컬 컴퓨터 사용자 또는 응용 프로그램에서 제공 되는 인증서 인증 되었는지 확인 해야 합니다. 사용자는 LSA 및 SSPI를 통해 제공 되는 인증서 Active Directory에 인증서 스토어를 통해 정품 로컬 로그온 로컬 컴퓨터, 네트워크를 또는 도메인에 대 한 평가 됩니다.

인증 데이터, 인증서를 생성 하는 메시지 요약 생성 하기 위해 Secure Hash Algorithm 1 (SHA1) 등 해시 알고리즘을 통해 전달 합니다. 메시지 요약을 보낸 사람이 메시지 요약 제작 되었습니다 증명 보낸 사람의 개인 키를 사용 하 여 디지털 서명 다음 됩니다.

> [!NOTE]
> SHA1은 Windows 7 및 Windows Vista의 기본 하지만 SHA2에 Windows 8으로 변경 했습니다.

**스마트 카드 인증**

스마트 카드 기술은 인증 인증서의 예입니다. 스마트 카드를 사용 하 여 네트워크에 로그인 도메인에 사용자 인증할 때 암호화 기반 식별 하 고 소유권 증명을 사용 하기 때문에 강력한 인증 제공 합니다. Active Directory 인증서 서비스 (AD CS)에 대 한 각 스마트 카드 로그온 인증서 발급 통해 암호화 기반 식별할 수 있게 합니다.

스마트 카드 인증에 대 한 정보를 참조 하세요.는 [Windows 스마트 카드 기술 참조](https://technet.microsoft.com/library/ff404297.aspx)합니다.

Windows 8에서 가상 스마트 카드 기술을 도입 되었습니다. 스마트 카드의 인증서를 PC에 저장 한 다음 디바이스의 무단 신뢰할 수 있는 플랫폼 모듈 TPM () 보안 칩을 사용 하 여 보호 합니다. 이런 방법으로 PC 인증 하기 위해 사용자의 PIN을 받아야 하는 스마트 카드 실제로 됩니다.

**원격 및 무선 인증**

원격 및 무선 네트워크 인증은 다른 기술 인증을 위한 인증서를 사용 하 여입니다. 인터넷 서비스 (인증) 및 가상 개인 네트워크 서버 네트워크 액세스를 (VPN) 가상 개인 네트워크 및 무선으로 연결 등의 다양 한 종류에 대 한 가지 옵션이 인증을 수행 하 Extensible 인증 프로토콜 전송 보안 수준 (EAP-TLS), 보호 Extensible 인증 프로토콜 (PEAP), 또는 인터넷 프로토콜 보안을 사용 합니다.

For information about certificate-based authentication in networking, see [Network access authentication and certificates](https://technet.microsoft.com/library/cc759575(WS.10).aspx).

## <a name="BKMK_SeeAlso"></a>참조 하십시오
[Windows 인증 개념](https://technet.microsoft.com/library/d169018.aspx)


