---
title: 전원 및 성능 튜닝
description: Windows Server 균형 조정된 전원 계획에 대 한 튜닝 프로세서 전원 관리 (PPM)
ms.prod: windows-server-threshold
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: Qizha;TristanB
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 91bc02e5edbdfbbbf3ccf600f3536a783e49eb79
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59814914"
---
# <a name="power-and-performance-tuning"></a>전원 및 성능 조정

에너지 효율성은 엔터프라이즈 및 데이터 센터 환경에서 점차 중요 해지 하 고 다른 집합 균형점을 찾아야 구성 옵션의 조합에 추가 합니다.

Windows Server 2016은 광범위 한 고객 워크 로드 최소 성능에 영향을 사용 하 여 뛰어난 에너지 효율성을 위해 최적화 됩니다. [Windows Server 분산 된 전원 관리에 대 한 프로세서 전원 관리 (PPM) 튜닝](processor-power-management-tuning.md) Windows Server 2016의 기본 매개 변수 튜닝에 사용 되는 워크 로드를 설명 하 고 사용자 지정된 tunings에 대 한 제안을 제공 합니다.

이 섹션에서는 서버의 기본 전원 설정을 조정 해야 할 경우 합리적인된 의사 결정을 내릴 수 있도록 에너지 효율 장단점을 확장 합니다. 그러나 대부분의 서버 하드웨어 및 작업 관리자가 Windows Server 2016을 실행 하는 경우 전원 튜닝 소요 됩니다.

## <a name="calculating-server-energy-efficiency"></a>서버 에너지 효율 계산

에너지 절약을 위한 서버를 튜닝할 때 성능을 고려해 야 합니다. 튜닝 성능과 과도 금액에 따라 전원, 영향을 줍니다. 가능한 각 조정에 대 한 절충 허용 되는지 확인 하려면 전원 예산 및 성능 목표를 고려 합니다.

전원 및 성능 정보를 통합 하는 데 유용한 메트릭 서버의 에너지 효율성 비율을 계산할 수 있습니다. 에너지 효율성에는 필요한 지정된 된 기간 동안 평균 제곱으로 수행 되는 작업의 비율입니다.

![에너지 효율성 수식](../../media/perftune-guide-power-formula.png)

기능과 성능 간의 균형을 준수 하는 실용적인 목표를 설정 하려면이 메트릭을 사용할 수 있습니다. 반면, 데이터 센터에서 에너지 절약 10%의 목표 성능에 또는 그 반대로 해당 효과 캡처하는 실패 합니다.

마찬가지로, 5% 및 10% 더 높은 에너지 소비에 해당 결과 성능 향상을 위해 서버를 튜닝 하는 경우 총 결과 수 또는 비즈니스 목표에 대 한 허용 되지 않을 수 있습니다. 에너지 효율성 메트릭 정보에 입각 한 의사 결정을 위해 보다 전원 또는 성능 메트릭만 사용할 수 있게 합니다.

## <a name="measuring-system-energy-consumption"></a>시스템 에너지 소비를 측정합니다.

에너지 효율성을 위해 서버를 튜닝 하기 전에 기본 전원 측정을 설정 해야 합니다.

서버에 필요한 지원, 성능 모니터를 사용 하 여 시스템 수준 에너지 소비를 보려면 측정 및 예산 기능 Windows Server 2016의 기능을 사용할 수 있습니다.

서버에서 계량에 대 한 지원 및 검토 하는 예산 여부를 결정 하는 한 가지 방법은 합니다 [Windows Server 카탈로그](http://www.windowsservercatalog.com)합니다. 서버 모델 Windows 하드웨어 인증 프로그램의 새로운 향상 된 전원 관리 자격에 대 한 정규화, 측정 및 예산 기능을 지원 하도록 보장 됩니다.

계량 지원에 대 한 확인 하는 다른 방법은 성능 모니터 카운터를 수동으로 검색할 것입니다. 성능 모니터를 열고 **카운터 추가**를 찾은 후 합니다 **전원 측정기** 카운터 그룹입니다.

레이블이 지정 된 상자에 표시 하는 경우 전원 측정기의 명명 된 인스턴스 **선택한 개체의 인스턴스**계량 사용자 플랫폼을 지원 합니다. 합니다 **전원** power 와트를 보여 주는 카운터 선택한 카운터 그룹에 표시 됩니다. 전원 데이터 값의 정확한 파생을 지정 하지 않았습니다. 예를 들어는 즉시 power 그리기 또는 일부 시간 간격 동안 평균 전력 그리기를 수 있습니다.

서버 플랫폼 계량을 지원 하지 않는 경우 시스템 전원 그리기 또는 에너지 소비를 측정 하는 전원 공급 장치 입력에 연결 된 실제 계량 장치를 사용할 수 있습니다.

기준선을 설정 하려면 평균 부하 줄을 생성 하려면 100% (최대 처리량) 유휴 상태에서 다양 한 시스템 부하 시점에서 필요한 기능을 측정 해야 합니다. 다음 그림은 세 가지 샘플 구성에 대 한 부하 줄:

![샘플 로드 줄](../../media/perftune-guide-sample-loadlines.png)

부하 줄을 사용 하 여를 평가 하 여 성능을 비교할 수 있습니다 하 고 구성 가능한 에너지 소비 전혀 부하 지점입니다. 이 특정 예제에서 가장 적합 한 구성을 확인 하기 쉽습니다. 그러나 쉽게 수 과도 한 워크 로드에 가장 적합 한 구성 하 고 가벼운 워크 로드에 가장 적합 한 시나리오입니다.

최적의 구성을 선택 하 여 워크 로드 요구 사항을 완벽 하 게 이해 해야 합니다. 좋은 구성을 찾았으면는 항상 상태로 최적의 가정 하지 마십시오. 시스템 사용률 및 에너지 소비를 정기적으로 및 워크 로드, 워크 로드 수준 또는 서버 하드웨어 변경 후 측정 해야 합니다.

## <a name="diagnosing-energy-efficiency-issues"></a>에너지 효율성 문제 진단

**PowerCfg.exe** 서버의 유휴 에너지 효율성을 분석 하는 데 사용할 수 있는 명령줄 옵션을 지원 합니다. PowerCfg.exe 사용 하 여를 실행 하는 경우는 **/energy** 옵션, 도구에서 잠재적인 에너지 효율성 문제를 감지 60 초 테스트를 수행 합니다. 도구는 현재 디렉터리에 간단한 HTML 보고서를 생성합니다.

>[!Important]
> 정확한 분석을 위해는 모든 로컬 앱 닫혀 있는지를 실행 하기 전에 **PowerCfg.exe**합니다. 

드라이버 부족 전원 관리 지원 및 CPU 사용률이 과도 한 통해 검색 되는 동작 문제 중 몇 가지를 타이머 틱 속도 단축 합니다 **powercfg /energy** 명령입니다. 이 도구는 식별 하 고 잠재적으로 상당한 비용 절감 대규모 데이터 센터에서 생성 되는 전원 관리 문제를 해결 하는 간단한 방법을 제공 합니다.

PowerCfg.exe에 대 한 자세한 내용은 참조 하세요. [시스템 에너지 효율 평가를 사용 하 여 PowerCfg](https://msdn.microsoft.com/windows/hardware/gg463250.aspx)합니다.

## <a name="using-power-plans-in-windows-server"></a>Windows Server의 전원 관리 옵션을 사용 하 여

Windows Server 2016에는 다른 집합이 비즈니스 요구를 충족 하도록 설계 된 세 가지 기본 전원 계획에 있습니다. 이러한 계획 전원 또는 성능 목표를 충족 하기 위해 서버를 사용자 지정할 수는 간단한 방법을 제공 합니다. 다음 표에서 계획에 설명 합니다. 각 계획을 사용 하는 일반적인 시나리오 목록과 각 계획에 대 한 몇 가지 구현 세부 정보를 제공 합니다.

| **계획** | **설명** | **일반적인 적용 가능한 시나리오** | **구현 하이라이트** |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| 분산 (권장) | 기본 설정입니다. 최소 성능에 영향을 적절 한 에너지 효율성을 대상 으로합니다. | 일반 컴퓨팅 | 용량 수요와 일치합니다. 에너지 절약 기능 성능을 조정합니다. |
| 고성능 | 에너지 소비 하는 대신 성능이 향상 됩니다. 전원 및 운영 비용을 및 안정성 고려 사항 열 제한 사항 적용 됩니다. | 프로세서 성능 변화에 민감한 앱 코드와 대기 시간이 짧은 앱 | 프로세서 (-"터보를 포함 하는 중 가장 높은 성능 상태로 항상 벗어나지? 빈도)입니다. 모든 코어 파킹 된지 않습니다. 열 출력 상당히 높을 수 있습니다. |
| 절전 | 운영 비용을 줄이고 에너지를 절약 하는 성능을 제한 합니다. 철저 한 테스트 없이 권장 되지 있는지 성능이 적합 합니다. | 제한적인된 전원 예산 및 열 제약 조건을 사용 하 여 배포 | 프로세서 최대값 (지원) 하는 경우의 백분율 빈도 제한 하 고 다른 절전 기능을 활성화 합니다. |


이러한 전원 계획에 Windows 교대 설정 현재 (AC) 및 (직류) 구동 시스템 있지만 서버 항상 사용 하는 AC 전원 가정 합니다.

전원 계획 전원 정책 구성에 대 한 자세한 내용은 참조 하세요. [Windows의 전원 정책 구성 및 배포](https://msdn.microsoft.com/windows/hardware/gg463243.aspx)합니다.

>[!Note]
> 일부 서버 제조업체에서 경우 BIOS 설정을 통해 사용 가능한 전원 관리 옵션 운영 체제 전원 관리에 대 한 제어에 없는 경우 Windows의 전원 관리 옵션을 변경 영향을 주지 않습니다 시스템 전원 및 성능.

## <a name="tuning-processor-power-management-parameters"></a>프로세서 전원 관리 매개 변수를 튜닝합니다.

각 전원 계획에는 다양 한 기본 전원 관리 매개 변수의 조합을 나타냅니다. 기본 계획은 다양 한 워크 로드 및 시나리오를 포괄 하는 권장 되는 설정의 세 가지 컬렉션이 있습니다. 그러나 이러한 계획은 모든 고객의 요구를 충족 하지 않음을 인식 합니다.

다음 섹션에서는 일부 세 가지 기본 제공 계획으로 다루지 목표 달성 하기 위해 특정 프로세서 전원 관리 매개 변수를 튜닝 하는 방법을 설명 합니다. 광범위 한 전원 매개 변수 배열 이해 해야 할 경우 참조 [Windows의 전원 정책 구성 및 배포](https://msdn.microsoft.com/windows/hardware/gg463243.aspx)합니다.

## <a name="processor-performance-boost-mode"></a>프로세서 성능 향상 모드

기능을 사용 하는 것이 가장 유용한 추가 성능을 프로세서를 Intel Turbo Boost 및 AMD 터보 CORE 기술은 (로드 높은 시스템 이므로). 그러나이 기능은 Windows Server 2016 구성 터보 기술을 사용 하 고 특정 처리기 구현에 있는 전원 정책을 기반으로 하므로 CPU 코어 에너지 소비, 증가 합니다.

모든 Intel 및 AMD 프로세서에서 고성능 전원 관리 옵션에 대 한 터보 사용 가능 하 고 절전 전원 관리 옵션에 대 한 비활성화 된. 기존의 P-상태 기반 빈도 관리를 사용 하는 시스템에서 분산 된 전원 계획에 대해 터보 플랫폼 지원 EPB 등록 하는 경우에 기본적으로 활성화 됩니다.

>[!Note]
> EPB 레지스터 Intel Westmere 및 이상 프로세서 에서만 지원 됩니다.

AMD 및 Intel Nehalem 프로세서에 대 한 터보 P-상태 기반 플랫폼에서 기본적으로 비활성화 됩니다. 그러나 시스템 공동 작업 프로세서 성능 컨트롤 (CPPC), 운영 체제 (ACPI 5.0에 정의 됨) 하드웨어 간의 성능 통신을 새 대체 모드를 지 원하는 경우 터보 유지 될 수 하는 경우는 Windows 운영 체제 시스템 동적으로 최고의 성능을 제공 하기 위해 하드웨어를 요청 합니다.

를 사용 하거나 Turbo Boost 기능을 사용 하지 않도록 설정 하려면 관리자 또는 선택한 전원 관리에 대 한 기본 매개 변수 설정에 따라 프로세서 성능 향상 Mode 매개 변수를 구성 합니다. 프로세서 성능 향상 모드 표 5에 표시 된 대로, 5 개 허용 되는 값에 있습니다.

P-상태 기반 컨트롤에 대 한 선택 하지 않는 경우 사용 (터보를 사용할 수는 하드웨어에 명목 성능 요청 될 때마다) 및 효율적인 터보 이어서 EPB 등록은 구현 하는 경우에 사용할 수 있습니다.

CPPC 기반 컨트롤에 대 한 선택 하지 않는 경우 효율적으로 사용 하도록 설정 (Windows 제공 하는 터보의 정확한 크기)를 지정 하 고 공격적인 (Windows 요청 "최대 성능 사용 하도록 설정 하려면 터보).

Windows Server 2016에서 Boost 모드에 대 한 기본값은 3입니다.

| **이름** | **P-상태 기반 동작** | **CPPC 동작** |
|--------------------------|------------------------|-------------------|
| 0 (사용 안 함) | 사용 안 함 | 사용 안 함 |
| 1 (사용) | Enabled | 효율적으로 사용 하도록 설정 |
| 2 (전체 업그레이드) | Enabled | 적극적인 |
| 3 (효율적인 사용) | 효율적인 경우 | 효율적으로 사용 하도록 설정 |
| 4 (효율적인 적극적인) | 효율적인 경우 | 적극적인 |

 
다음 명령을 현재 전원 계획에서 프로세서 성능 향상 모드를 사용 하도록 설정 (정책 GUID 별칭을 사용 하 여 지정).

``` syntax
Powercfg -setacvalueindex scheme_current sub_processor PERFBOOSTMODE 1
Powercfg -setactive scheme_current
```

>[!Important]  실행 해야 합니다 **powercfg setactive** 명령을 새 설정을 사용 하도록 설정 합니다. 서버를 다시 부팅할 필요가 없습니다.

현재 선택한 계획 이외의 전원 관리 옵션에 대해이 값을 설정 하려면 체계와 같은 별칭을 사용할 수 있습니다\_최대 (절전), 구성표\_(성능 우선), 분 및 구성표\_체계대신부하분산(부하분산)\_현재 합니다. "체계 현재 전환 바꾸기? 에 전원 관리 옵션을 사용 하도록 설정 하려면 별칭을 사용 하 여 이전에 표시 되는 powercfg-setactive 명령입니다.

예를 들어, 해당 절전 절전 계획에서 Boost 모드를 조정 하는 다음 명령을 실행 하는 현재 요금제를:

``` syntax
Powercfg -setacvalueindex scheme_max sub_processor PERFBOOSTMODE 1
Powercfg -setactive scheme_max
```

## <a name="minimum-and-maximum-processor-performance-state"></a>최소 및 최대 프로세서 성능 상태

프로세서 성능 상태 (P-상태) 간에 매우 신속 하 게 일치 공급 요청을, 성능을 제공 하 여 필요한 경우 및 변경 가능 하면 에너지를 저장 합니다. 서버에 고성능 또는 최소 전력 소비에 대 한 특정 요구를 구성할 수도 있습니다는 **최소 프로세서 성능 상태** 매개 변수 또는 **최대 프로세서 성능 상태** 매개 변수입니다.

에 대 한 값을 **최소 프로세서 성능 상태** 하 고 **최대 프로세서 성능 상태** 매개 변수 값이 0 – 범위에 있는 최대 프로세서 빈도 대 한 백분율로 표현 됩니다 100입니다.

서버에서 짧은 대기 시간, 고정 CPU 빈도 (예: 반복 가능한 테스트) 또는 가장 높은 성능 수준에 필요한 경우 낮은 성능 상태를 전환 하는 프로세서 않을 수도 있습니다. 이러한 서버의 경우 다음 명령을 사용 하 여 100% 최소 프로세서 성능 상태를 제한할 수 있습니다.

``` syntax
Powercfg -setacvalueindex scheme_current sub_processor PROCTHROTTLEMIN 100
Powercfg -setactive scheme_current
```

서버에 더 낮은 에너지 소비량을 필요한 경우 최대의 비율로 프로세서 성능 상태를 방지 하는 것이 좋습니다. 예를 들어, 다음 명령을 사용 하 여 최대 빈도의 75%에 프로세서를 제한할 수 있습니다.

``` syntax
Powercfg -setacvalueindex scheme_current sub_processor PROCTHROTTLEMAX 75
Powercfg -setactive scheme_current
```

>[!Note]
> 프로세서 성능은 최대의 비율 제한 프로세서 지원에 필요 합니다. 성능 모니터 카운터를 보거나 이러한 지원이 있는지 여부를 확인 하려면 프로세서 설명서를 확인 **최대 주파수의 백분율** 에 **프로세서** 경우 모든 빈도 대문자로 된 참조 그룹 적용 합니다.

## <a name="processor-performance-increase-and-decrease-of-thresholds-and-policies"></a>프로세서 성능 증가 및 감소 임계값 및 정책

프로세서 성능 상태를 증가 또는 감소 속도 여러 매개 변수로 제어 됩니다. 다음 4 개의 매개 변수를 두드러진 큰 영향을 미칩니다.

-   **프로세서 성능 증가 임계값** 프로세서의 성능 상태 증가 위의 사용률 값을 정의 합니다. 더 큰 값 증가 작업에 대 한 응답으로 성능 상태에 대 한 증가 속도 저하.

-   **프로세서 성능 저하 임계값** 프로세서의 성능 상태 저하 됩니다는 아래 사용률 값을 정의 합니다. 값이 클수록 유휴 기간 동안 성능 상태에 대 한 감소 비율을 늘립니다.

-   **프로세서 성능 향상 정책 및 프로세서 성능이 저하** 정책 결정을 변경 되 면 성능 상태를 설정 해야 합니다. "단일? 정책 다음 상태를 선택 하는 것을 의미 합니다. "Rocket? 최소 또는 최대 전원 성능 상태를 의미합니다. "이상적? 전원과 성능 사이의 균형을 유지 하려고 시도 합니다.

예를 들어 서버에 유휴 기간 동안 낮은 전력의 이점을 계속 지원 하면서 매우 짧은 대기 시간을 필요한 경우 부하 증가 대 한 성능 상태 증가 quicken 및 부하가 감소할 때 감소를 저하 수 있습니다. "Rocket 증가 정책을 설정 하는 다음 명령? 빠른 상태에 대 한 증가 및 감소 정책으로 설정 "단일?. 증가 및 감소 임계값 각각 8 및 10으로 설정 됩니다.

``` syntax
Powercfg.exe -setacvalueindex scheme_current sub_processor PERFINCPOL 2
Powercfg.exe -setacvalueindex scheme_current sub_processor PERFDECPOL 1
Powercfg.exe -setacvalueindex scheme_current sub_processor PERFINCTHRESHOLD 10
Powercfg.exe -setacvalueindex scheme_current sub_processor PERFDECTHRESHOLD 8
Powercfg.exe /setactive scheme_current
```

## <a name="processor-performance-core-parking-maximum-and-minimum-cores"></a>최대 및 최소 코어 파킹 프로세서 성능 코어

코어 파킹에는 Windows Server 2008 R2에 도입 된 기능입니다. 프로세서 전원 관리 (PPM) 엔진과 스케줄러 스레드를 실행할 수 있는 코어 수를 동적으로 조정 하려면 함께 작동 합니다. PPM 엔진에는 예약 된 스레드에 대 한 코어의 최소 수를 선택 합니다.

일반적으로 주차 된 코어에 예약 된 모든 스레드의 없고 인터럽트, Dpc를 엄격 하 게 선호도 설정 된 다른 작업이 처리 되지 않습니다. 때 매우 절전 상태로 삭제 됩니다. 남아 있는 코어 작업의 나머지 부분에 대 한 책임이 있습니다. 코어 파킹 낮은 사용 하는 동안 에너지 효율성을 증가할 수 있습니다.

대부분의 서버에 대 한 기본 코어 파킹 동작 처리량 및 에너지 효율성의 적절 한 균형을 제공합니다. 프로세서 코어 파킹 일반 워크 로드에서 많은 혜택 표시 하지 않을 수에서 기본적으로 해제할 수 있습니다.

서버에 특정 코어 파킹 요구 사항, 사용 하 여 배치에 사용할 수 있는 코어 수를 제어할 수 있습니다 합니다 **프로세서 성능 코어 파킹 최대 코어** 매개 변수 또는 **프로세서 성능 코어 파킹 최소 코어** Windows Server 2016에서 매개 변수입니다.

없는 코어 파킹 항상 적합 한 시나리오는 NUMA 노드의 cpu trivial이 아닌 하위 집합으로 선호도 하나 이상의 활성 스레드가 있는 경우 (즉, 두 개 이상의 CPU, 노드에서 Cpu의 전체 집합 이지만 미만). Unpark 코어 코어 파킹 알고리즘을 선택 하는 경우 항상 코어, unpark에 활성 선호도 설정 된 하위 집합 (또는 하위 집합) 내에서 선택 하지 않을 수 있습니다 (가정 발생 하는 작업 부하의 강도 증가) 및 따라서 있습니다 unparking 프로세싱 코어는 실제로 없습니다 사용 됩니다.

이러한 매개 변수 값은 0 ~ 100 사이의 백분율입니다. 합니다 **프로세서 성능 코어 파킹 최대 코어** 매개 변수 컨트롤 (스레드 실행 가능) unparked 될 수 있는 코어의 최대 비율을 언제 든 지 하는 동안는 **프로세서 성능 코어 파킹 최소 코어** 매개 변수를 대기 중인 수 있는 코어의 최소 비율을 제어 합니다. 코어 파킹을 해제 하려면 설정 합니다 **프로세서 성능 코어 파킹 최소 코어** 다음 명령을 사용 하 여 100%로 매개 변수:

``` syntax
Powercfg -setacvalueindex scheme_current sub_processor CPMINCORES 100
Powercfg -setactive scheme_current
```

예약 가능 코어 수가 최대 개수에 대 한 50%를 줄이려면 설정 합니다 **프로세서 성능 코어 파킹 최대 코어** 매개 변수를 다음과 같이 50:

``` syntax
Powercfg -setacvalueindex scheme_current sub_processor CPMAXCORES 50
Powercfg -setactive scheme_current
```

## <a name="processor-performance-core-parking-utility-distribution"></a>프로세서 성능 코어 파킹 유틸리티 배포

유틸리티 분포는 일부 워크 로드에 대 한 전원 효율성을 개선 하도록 설계 된 Windows Server 2016에서 알고리즘 최적화입니다. (즉, Dpc, 인터럽트 또는 엄격 하 게 선호도 설정 된 스레드) 이동할 수 없는 CPU 활동을 추적 하 고 모든 unparked 코어 이동 가능한 모든 작업을 동일 하 게 배포할 수 있습니다 가정을 기반으로 각 프로세서의 이후 작업 예측 합니다.

배포 유틸리티는 일부 프로세서에 분산 된 전원 관리 옵션에 대 한 기본으로 사용 됩니다. 프로세서 전력 소비를 합리적으로 안정적인 상태에 있는 작업의 요청 된 CPU 주파수를 내려 줄일 수 있습니다. 그러나 배포 유틸리티 아니며 반드시 있는 워크 로드를 신속 하 고 임의로 이동 프로세서에서 프로그램 또는 높은 활동 버스트 적용 되는 워크 로드에 대 한 적합 한 알고리즘 선택

이러한 워크 로드의 경우 다음 명령을 사용 하 여 배포 유틸리티를 사용 하지 않도록 설정 하는 것이 좋습니다.

``` syntax
Powercfg -setacvalueindex scheme_current sub_processor DISTRIBUTEUTIL 0
Powercfg -setactive scheme_current
```

## <a name="see-also"></a>관련 항목
- [서버 하드웨어에 대 한 성능 고려 사항](../index.md)
- [서버 하드웨어에 대 한 전원 고려 사항](../power.md)
- [프로세서 전원 관리 튜닝](processor-power-management-tuning.md)
- [분산 된 계획 매개 변수를 권장합니다.](recommended-balanced-plan-parameters.md)
